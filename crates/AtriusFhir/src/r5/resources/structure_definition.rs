// AUTO-GENERATED by atrius-fhir-generator (R5 StructureDefinition)
use crate::r5::*;

/// Choice of types for the versionAlgorithm\[x\] field in StructureDefinition
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, FhirValidate)]
#[fhir_choice_element(base_name = "versionAlgorithm")]
pub enum StructureDefinitionVersionAlgorithm {
    /// Variant accepting the String type.
    #[fhir_serde(rename = "versionAlgorithmString")]
    String(String),
    /// Variant accepting the Coding type.
    #[fhir_serde(rename = "versionAlgorithmCoding")]
    Coding(Coding),
}

/// FHIR StructureDefinition type
/// 
/// A definition of a FHIR structure. This resource is used to describe the
/// underlying resources, data types defined in FHIR, and also for describing
/// extensions and constraints on resources and data types.
/// 
/// ## Type: Resource type
/// Base type: http://hl7.org/fhir/StructureDefinition/DomainResource
/// 
/// ## Status: active
/// FHIR Version: 5.0.0
/// 
/// See: [StructureDefinition](http://hl7.org/fhir/StructureDefinition/StructureDefinition)
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "versionAlgorithm")]
#[fhir_invariant(key="cnl-0", severity="warning", human="Name should be usable as an identifier for the module by machine processing applications such as code generation", expr="name.exists() implies name.matches('^[A-Z]([A-Za-z0-9_]){1,254}$')", path="StructureDefinition")]
#[fhir_invariant(key="sdf-1", severity="error", human="Element paths must be unique unless the structure is a constraint", expr="derivation = 'constraint' or snapshot.element.select(path).isDistinct()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-4", severity="error", human="If the structure is not abstract, then there SHALL be a baseDefinition", expr="abstract = true or baseDefinition.exists()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-5", severity="error", human="If the structure defines an extension then the structure must have context information", expr="type != 'Extension' or derivation = 'specialization' or (context.exists())", path="StructureDefinition")]
#[fhir_invariant(key="sdf-6", severity="error", human="A structure must have either a differential, or a snapshot (or both)", expr="snapshot.exists() or differential.exists()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-11", severity="error", human="If there's a type, its content must match the path name in the first element of a snapshot", expr="kind != 'logical' implies snapshot.empty() or snapshot.element.first().path = type", path="StructureDefinition")]
#[fhir_invariant(key="sdf-14", severity="error", human="All element definitions must have an id", expr="snapshot.element.all(id.exists()) and differential.element.all(id.exists())", path="StructureDefinition")]
#[fhir_invariant(key="sdf-15", severity="error", human="The first element in a snapshot has no type unless model is a logical model.", expr="kind!='logical'  implies snapshot.element.first().type.empty()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-15a", severity="error", human="If the first element in a differential has no \".\" in the path and it's not a logical model, it has no type", expr="(kind!='logical'  and differential.element.first().path.contains('.').not()) implies differential.element.first().type.empty()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-9", severity="error", human="In any snapshot or differential, no label, code or requirements on an element without a \".\" in the path (e.g. the first element)", expr="children().element.where(path.contains('.').not()).label.empty() and children().element.where(path.contains('.').not()).code.empty() and children().element.where(path.contains('.').not()).requirements.empty()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-16", severity="error", human="All element definitions must have unique ids (snapshot)", expr="snapshot.element.all(id.exists()) and snapshot.element.id.trace('ids').isDistinct()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-17", severity="error", human="All element definitions must have unique ids (diff)", expr="differential.element.all(id.exists()) and differential.element.id.trace('ids').isDistinct()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-18", severity="error", human="Context Invariants can only be used for extensions", expr="contextInvariant.exists() implies type = 'Extension'", path="StructureDefinition")]
#[fhir_invariant(key="sdf-19", severity="error", human="FHIR Specification models only use FHIR defined types", expr="url.startsWith('http://hl7.org/fhir/StructureDefinition') implies (differential | snapshot).element.type.code.all(matches('^[a-zA-Z0-9]+$') or matches('^http:\\\\/\\\\/hl7\\\\.org\\\\/fhirpath\\\\/System\\\\.[A-Z][A-Za-z]+$'))", path="StructureDefinition")]
#[fhir_invariant(key="sdf-21", severity="error", human="Default values can only be specified on specializations", expr="differential.element.defaultValue.exists() implies (derivation = 'specialization')", path="StructureDefinition")]
#[fhir_invariant(key="sdf-22", severity="error", human="FHIR Specification models never have default values", expr="url.startsWith('http://hl7.org/fhir/StructureDefinition') implies (snapshot.element.defaultValue.empty() and differential.element.defaultValue.empty())", path="StructureDefinition")]
#[fhir_invariant(key="sdf-23", severity="error", human="No slice name on root", expr="(snapshot | differential).element.all(path.contains('.').not() implies sliceName.empty())", path="StructureDefinition")]
#[fhir_invariant(key="sdf-27", severity="error", human="If there's a base definition, there must be a derivation ", expr="baseDefinition.exists() implies derivation.exists()", path="StructureDefinition")]
#[fhir_invariant(key="sdf-29", severity="warning", human="Elements in Resources must have a min cardinality or 0 or 1 and a max cardinality of 1 or *", expr="((kind in 'resource' | 'complex-type') and (derivation = 'specialization')) implies differential.element.where((min != 0 and min != 1) or (max != '1' and max != '*')).empty()", path="StructureDefinition")]
pub struct StructureDefinition {
    /// Logical id of this artifact
    /// 
    /// The logical id of the resource, as used in the URL for the resource. Once
    /// assigned, this value never changes.
    /// 
    /// ## Implementation Notes
    /// Within the context of the FHIR RESTful interactions, the resource has an id
    /// except for cases like the create and conditional update. Otherwise, the use
    /// of the resouce id depends on the given use case.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    pub id: Option<String>,
    /// Metadata about the resource
    /// 
    /// The metadata about the resource. This is content that is maintained by the
    /// infrastructure. Changes to the content might not always be associated with
    /// version changes to the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.meta")]
    pub meta: Option<Meta>,
    /// A set of rules under which this content was created
    /// 
    /// A reference to a set of rules that were followed when the resource was
    /// constructed, and which must be understood when processing the content. Often,
    /// this is a reference to an implementation guide that defines the special rules
    /// along with other profiles etc.
    /// 
    /// ## Implementation Notes
    /// Asserting this rule set restricts the content to be only understood by a
    /// limited set of trading partners. This inherently limits the usefulness of the
    /// data in the long term. However, the existing health eco-system is highly
    /// fractured, and not yet ready to define, collect, and exchange data in a
    /// generally computable sense. Wherever possible, implementers and/or
    /// specification writers should avoid using this element. Often, when used, the
    /// URL is a reference to an implementation guide that defines these special
    /// rules as part of its narrative along with other profiles, value sets, etc.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the implicit rules may provide additional knowledge about the resource that modifies its meaning or interpretation
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.implicitRules")]
    #[fhir_serde(rename = "implicitRules")]
    pub implicit_rules: Option<Uri>,
    /// Language of the resource content
    /// 
    /// The base language in which the resource is written.
    /// 
    /// ## Implementation Notes
    /// Language is provided to support indexing and accessibility (typically,
    /// services such as text to speech use the language tag). The html language tag
    /// in the narrative applies to the narrative. The language tag on the resource
    /// may be used to specify the language of other presentations generated from the
    /// data in the resource. Not all the content has to be in the base language. The
    /// Resource.language should not be assumed to apply to the narrative
    /// automatically. If a language is specified, it should it also be specified on
    /// the div element in the html (see rules in HTML5 for information about the
    /// relationship between xml:lang and the html lang attribute).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: IETF language tag for a human language
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/all-languages|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/all-languages")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.language")]
    pub language: Option<Code>,
    /// Text summary of the resource, for human interpretation
    /// 
    /// A human-readable narrative that contains a summary of the resource and can be
    /// used to represent the content of the resource to a human. The narrative need
    /// not encode all the structured data, but is required to contain sufficient
    /// detail to make it "clinically safe" for a human to just read the narrative.
    /// Resource definitions may define what content should be represented in the
    /// narrative to ensure clinical safety.
    /// 
    /// ## Implementation Notes
    /// Contained resources do not have a narrative. Resources that are not contained
    /// SHOULD have a narrative. In some cases, a resource may only have text with
    /// little or no additional discrete data (as long as all minOccurs=1 elements
    /// are satisfied). This may be necessary for data from legacy systems where
    /// information is captured as a "text blob" or where text is additionally
    /// entered raw or narrated and encoded information is added later.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// narrative, html, xhtml, display
    /// 
    /// ## Conditions
    /// Used when: dom-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.text")]
    pub text: Option<Narrative>,
    /// Contained, inline Resources
    /// 
    /// These resources do not have an independent existence apart from the resource
    /// that contains them - they cannot be identified independently, nor can they
    /// have their own independent transaction scope. This is allowed to be a
    /// Parameters resource if and only if it is referenced by a resource that
    /// provides context/meaning.
    /// 
    /// ## Implementation Notes
    /// This should never be done when the content can be identified properly, as
    /// once identification is lost, it is extremely difficult (and context
    /// dependent) to restore it again. Contained resources may have profiles and
    /// tags in their meta elements, but SHALL NOT have security labels.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Aliases
    /// inline resources, anonymous resources, contained resources
    /// 
    /// ## Conditions
    /// Used when: dom-2, dom-4, dom-3, dom-5
    pub contained: Option<Vec<Resource>>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource and that modifies the understanding of the element
    /// that contains it and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer is allowed to define an extension, there is a set of requirements
    /// that SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the resource that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Canonical identifier for this structure definition, represented as a URI (globally unique)
    /// 
    /// An absolute URI that is used to identify this structure definition when it is
    /// referenced in a specification, model, design or an instance; also called its
    /// canonical identifier. This SHOULD be globally unique and SHOULD be a literal
    /// address at which an authoritative instance of this structure definition is
    /// (or will be) published. This URL can be the target of a canonical reference.
    /// It SHALL remain the same when the structure definition is stored on different
    /// servers.
    /// 
    /// ## Requirements
    /// Allows the structure definition to be referenced by a single globally unique
    /// identifier.
    /// 
    /// ## Implementation Notes
    /// Can be a urn:uuid: or a urn:oid: but real http: addresses are preferred.
    /// Multiple instances may share the same URL if they have a distinct version.
    /// 
    /// The determination of when to create a new version of a resource (same url,
    /// new version) vs. defining a new artifact is up to the author. Considerations
    /// for making this decision are found in [Technical and Business
    /// Versions](resource.html#versions).
    /// 
    /// In some cases, the resource can no longer be found at the stated url, but the
    /// url itself cannot change. Implementations can use the
    /// [meta.source](resource.html#meta) element to indicate where the current
    /// master source of the resource can be found.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **cnl-1**: URL should not contain | or # - these characters make processing canonical references problematic (warning)
    ///   Expression: `exists() implies matches('^[^|# ]+$')`
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// url, authoritative-url, destination, identity
    /// 
    /// ## Conditions
    /// Used when: sdf-19, sdf-22
    #[fhir_invariant(key="cnl-1", severity="warning", human="URL should not contain | or # - these characters make processing canonical references problematic", expr="exists() implies matches('^[^|# ]+$')", path="StructureDefinition.url")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.url")]
    pub url: Uri,
    /// Additional identifier for the structure definition
    /// 
    /// A formal identifier that is used to identify this structure definition when
    /// it is represented in other formats, or referenced in a specification, model,
    /// design or an instance.
    /// 
    /// ## Requirements
    /// Allows externally provided and/or usable business identifiers to be easily
    /// associated with the module.
    /// 
    /// ## Implementation Notes
    /// Typically, this is used for identifiers that can go in an HL7 V3 II (instance
    /// identifier) data type, and can then identify this structure definition
    /// outside of FHIR, where it is not possible to use the logical URI.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.identifier")]
    pub identifier: Option<Vec<Identifier>>,
    /// Business version of the structure definition
    /// 
    /// The identifier that is used to identify this version of the structure
    /// definition when it is referenced in a specification, model, design or
    /// instance. This is an arbitrary value managed by the structure definition
    /// author and is not expected to be globally unique. There is no expectation
    /// that versions can be placed in a lexicographical sequence, so authors are
    /// encouraged to populate the StructureDefinition.versionAlgorithm[x] element to
    /// enable comparisons. If there is no managed version available, authors can
    /// consider using ISO date/time syntax (e.g., '2023-01-01').
    /// 
    /// ## Implementation Notes
    /// There may be different structure definition instances that have the same
    /// identifier but different versions. The version can be appended to the url in
    /// a reference to allow a reference to a particular business version of the
    /// structure definition with the format [url]|[version]. The version SHOULD NOT
    /// contain a '#' - see [Business Version](resource.html#bv-format).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.version")]
    pub version: Option<String>,
    /// How to compare versions
    /// 
    /// Indicates the mechanism used to compare versions to determine which is more
    /// current.
    /// 
    /// ## Implementation Notes
    /// If set as a string, this is a FHIRPath expression that has two additional
    /// context variables passed in - %version1 and %version2 and will return a
    /// negative number if version1 is newer, a positive number if version2 and a 0
    /// if the version ordering can't be successfully be determined.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/version-algorithm
    #[fhir_binding(strength="extensible", valueset="http://hl7.org/fhir/ValueSet/version-algorithm")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.versionAlgorithm[x]")]
    #[fhir_serde(flatten)]
    pub version_algorithm: Option<StructureDefinitionVersionAlgorithm>,
    /// Name for this structure definition (computer friendly)
    /// 
    /// A natural language name identifying the structure definition. This name
    /// should be usable as an identifier for the module by machine processing
    /// applications such as code generation.
    /// 
    /// ## Requirements
    /// Support human navigation and code generation.
    /// 
    /// ## Implementation Notes
    /// The name is not expected to be globally unique. The name should be a simple
    /// alphanumeric type name to ensure that it is machine-processing friendly.Some
    /// Examples:
    /// 
    /// * O2SatObservation
    /// * PresentationReport
    /// * Immunization2
    /// * AcmeAdmissionRecordOld.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: cnl-0
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.name")]
    pub name: String,
    /// Name for this structure definition (human friendly)
    /// 
    /// A short, descriptive, user-friendly title for the structure definition.
    /// 
    /// ## Implementation Notes
    /// This name does not need to be machine-processing friendly and may contain
    /// punctuation, white-space, etc.Applications don't have to use this name but
    /// can always fall back to it. The title also corresponds to the label for the
    /// root element.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.title")]
    pub title: Option<String>,
    /// draft | active | retired | unknown
    /// 
    /// The status of this structure definition. Enables tracking the life-cycle of
    /// the content.
    /// 
    /// ## Implementation Notes
    /// Allows filtering of structure definitions that are appropriate for use versus
    /// not.
    /// 
    /// See guidance around (not) making local changes to elements
    /// [here](canonicalresource.html#localization).
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This is labeled as "Is Modifier" because applications should not use a retired {{title}} without due consideration
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: The lifecycle status of an artifact.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/publication-status|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/publication-status")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.status")]
    pub status: Code,
    /// For testing purposes, not real usage
    /// 
    /// A Boolean value to indicate that this structure definition is authored for
    /// testing purposes (or education/evaluation/marketing) and is not intended to
    /// be used for genuine usage.
    /// 
    /// ## Requirements
    /// Enables experimental content to be developed following the same lifecycle
    /// that would be used for a production-level structure definition.
    /// 
    /// ## Implementation Notes
    /// Allows filtering of structure definitions that are appropriate for use versus
    /// not.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// - When missing: If absent, this resource is treated as though it is not experimental.
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.experimental")]
    pub experimental: Option<Boolean>,
    /// Date last changed
    /// 
    /// The date (and optionally time) when the structure definition was last
    /// significantly changed. The date must change when the business version changes
    /// and it must change if the status code changes. In addition, it should change
    /// when the substantive content of the structure definition changes.
    /// 
    /// ## Implementation Notes
    /// The date is often not tracked until the resource is published, but may be
    /// present on draft content. Note that this is not the same as the resource
    /// last-modified-date, since the resource may be a secondary representation of
    /// the structure definition. Additional specific dates may be added as
    /// extensions or be found by consulting Provenances associated with past
    /// versions of the resource.
    /// 
    /// See guidance around (not) making local changes to elements
    /// [here](canonicalresource.html#localization).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Revision Date
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.date")]
    pub date: Option<DateTime>,
    /// Name of the publisher/steward (organization or individual)
    /// 
    /// The name of the organization or individual responsible for the release and
    /// ongoing maintenance of the structure definition.
    /// 
    /// ## Requirements
    /// Helps establish the "authority/credibility" of the structure definition. May
    /// also allow for contact.
    /// 
    /// ## Implementation Notes
    /// Usually an organization but may be an individual. The publisher (or steward)
    /// of the structure definition is the organization or individual primarily
    /// responsible for the maintenance and upkeep of the structure definition. This
    /// is not necessarily the same individual or organization that developed and
    /// initially authored the content. The publisher is the primary point of contact
    /// for questions or issues with the structure definition. This item SHOULD be
    /// populated unless the information is available from context.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.publisher")]
    pub publisher: Option<String>,
    /// Contact details for the publisher
    /// 
    /// Contact details to assist a user in finding and communicating with the
    /// publisher.
    /// 
    /// ## Implementation Notes
    /// May be a web site, an email address, a telephone number, etc.
    /// 
    /// See guidance around (not) making local changes to elements
    /// [here](canonicalresource.html#localization).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.contact")]
    pub contact: Option<Vec<ContactDetail>>,
    /// Natural language description of the structure definition
    /// 
    /// A free text natural language description of the structure definition from a
    /// consumer's perspective.
    /// 
    /// ## Implementation Notes
    /// This description can be used to capture details such as comments about
    /// misuse, instructions for clinical use and interpretation, literature
    /// references, examples from the paper world, etc. It is not a rendering of the
    /// structure definition as conveyed in the 'text' field of the resource itself.
    /// This item SHOULD be populated unless the information is available from
    /// context (e.g. the language of the structure definition is presumed to be the
    /// predominant language in the place the structure definition was created).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.description")]
    pub description: Option<Markdown>,
    /// The context that the content is intended to support
    /// 
    /// The content was developed with a focus and intent of supporting the contexts
    /// that are listed. These contexts may be general categories (gender, age, ...)
    /// or may be references to specific programs (insurance plans, studies, ...) and
    /// may be used to assist with indexing and searching for appropriate structure
    /// definition instances.
    /// 
    /// ## Requirements
    /// Assist in searching for appropriate content.
    /// 
    /// ## Implementation Notes
    /// When multiple useContexts are specified, there is no expectation that all or
    /// any of the contexts apply.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.useContext")]
    #[fhir_serde(rename = "useContext")]
    pub use_context: Option<Vec<UsageContext>>,
    /// Intended jurisdiction for structure definition (if applicable)
    /// 
    /// A legal or geographic region in which the structure definition is intended to
    /// be used.
    /// 
    /// ## Implementation Notes
    /// It may be possible for the structure definition to be used in jurisdictions
    /// other than those for which it was originally designed or intended.
    /// 
    /// DEPRECATION NOTE: For consistency, implementations are encouraged to migrate
    /// to using the new 'jurisdiction' code in the useContext element. (I.e.
    /// useContext.code indicating
    /// http://terminology.hl7.org/CodeSystem/usage-context-type#jurisdiction and
    /// useContext.valueCodeableConcept indicating the jurisdiction.)
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Countries and regions within which this artifact is targeted for use.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/jurisdiction
    #[fhir_binding(strength="extensible", valueset="http://hl7.org/fhir/ValueSet/jurisdiction")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.jurisdiction")]
    pub jurisdiction: Option<Vec<CodeableConcept>>,
    /// Why this structure definition is defined
    /// 
    /// Explanation of why this structure definition is needed and why it has been
    /// designed as it has.
    /// 
    /// ## Implementation Notes
    /// This element does not describe the usage of the structure definition.
    /// Instead, it provides traceability of ''why'' the resource is either needed or
    /// ''why'' it is defined as it is. This may be used to point to source materials
    /// or specifications that drove the structure of this structure definition.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.purpose")]
    pub purpose: Option<Markdown>,
    /// Use and/or publishing restrictions
    /// 
    /// A copyright statement relating to the structure definition and/or its
    /// contents. Copyright statements are generally legal restrictions on the use
    /// and publishing of the structure definition. The short copyright declaration
    /// (e.g. (c) '2015+ xyz organization' should be sent in the copyrightLabel
    /// element.
    /// 
    /// ## Requirements
    /// Consumers must be able to determine any legal restrictions on the use of the
    /// structure definition and/or its content.
    /// 
    /// ## Implementation Notes
    /// ...
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// License, Restrictions
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.copyright")]
    pub copyright: Option<Markdown>,
    /// Copyright holder and year(s)
    /// 
    /// A short string (<50 characters), suitable for inclusion in a page footer that
    /// identifies the copyright holder, effective period, and optionally whether
    /// rights are resctricted. (e.g. 'All rights reserved', 'Some rights reserved').
    /// 
    /// ## Requirements
    /// Defines the content expected to be rendered in all representations of the
    /// artifact.
    /// 
    /// ## Implementation Notes
    /// The (c) symbol should NOT be included in this string. It will be added by
    /// software when rendering the notation. Full details about licensing,
    /// restrictions, warrantees, etc. goes in the more general 'copyright' element.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.copyrightLabel")]
    #[fhir_serde(rename = "copyrightLabel")]
    pub copyright_label: Option<String>,
    /// Assist with indexing and finding
    /// 
    /// (DEPRECATED) A set of key words or terms from external terminologies that may
    /// be used to assist with indexing and searching of templates nby describing the
    /// use of this structure definition, or the content it describes.
    /// 
    /// ## Requirements
    /// Assist in searching for appropriate StructureDefinitions.
    /// 
    /// ## Implementation Notes
    /// Note that this element is deprecated. Use the
    /// [http://hl7.org/fhir/StructureDefinition/artifact-topic](http://hl7.org/fhir/extensions/StructureDefinition-artifact-topic.html)
    /// extension instead.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Codes for the meaning of the defined structure (SNOMED CT and LOINC codes, as an example).
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/definition-use
    #[fhir_binding(strength="extensible", valueset="http://hl7.org/fhir/ValueSet/definition-use")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.keyword")]
    pub keyword: Option<Vec<Coding>>,
    /// FHIR Version this StructureDefinition targets
    /// 
    /// The version of the FHIR specification on which this StructureDefinition is
    /// based - this is the formal version of the specification, without the revision
    /// number, e.g. [publication].[major].[minor], which is 4.6.0. for this version.
    /// 
    /// ## Implementation Notes
    /// A StructureDefinition does not need to specify the target it applies to as
    /// StructureDefinitions will often be valid across multiple versions of FHIR.
    /// FHIR tooling can determine whether a StructureDefinition is consistent with a
    /// particular StructureDefinition if desired.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: All published FHIR Versions.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/FHIR-version|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/FHIR-version")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.fhirVersion")]
    #[fhir_serde(rename = "fhirVersion")]
    pub fhir_version: Option<Code>,
    /// External specification that the content is mapped to
    /// 
    /// An external specification that the content is mapped to.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **sdf-2**: Must have at least a name or a uri (or both) (error)
    ///   Expression: `name.exists() or uri.exists()`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping")]
    #[fhir_invariant(key="sdf-2", severity="error", human="Must have at least a name or a uri (or both)", expr="name.exists() or uri.exists()", path="StructureDefinition.mapping")]
    pub mapping: Option<Vec<StructureDefinitionMapping>>,
    /// primitive-type | complex-type | resource | logical
    /// 
    /// Defines the kind of structure that this definition is describing.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Defines the type of structure that a definition is describing.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/structure-definition-kind|5.0.0
    /// 
    /// ## Conditions
    /// Used when: sdf-15a, sdf-15, sdf-11, sdf-29, sdf-8, sdf-3, sdf-8a
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/structure-definition-kind")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.kind")]
    pub kind: Code,
    /// Whether the structure is abstract
    /// 
    /// Whether structure this definition describes is abstract or not - that is,
    /// whether the structure is not intended to be instantiated. For Resources and
    /// Data types, abstract types will never be exchanged between systems.
    /// 
    /// ## Implementation Notes
    /// Abstract Resources cannot be instantiated - a concrete sub-type must be used.
    /// Abstract datatypes and extensions cannot be used in an instance. For logical
    /// models, the exact implication of "abstract" will rest with the author,
    /// depending how the logical model is used. Flagging a constraint structure as
    /// abstract conveys design intent but makes no difference to how the structure
    /// definition is handled. Note that inline declared elements that are given the
    /// type "Element" in the StructureDefinition, but have children described, are
    /// anonymous concrete types that specialize Element.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-4
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.abstract")]
    #[fhir_serde(rename = "abstract")]
    pub r#abstract: Boolean,
    /// If an extension, where it can be used in instances
    /// 
    /// Identifies the types of resource or data type elements to which the extension
    /// can be applied. For more guidance on using the 'context' element, see the
    /// [defining extensions page](defining-extensions.html#context).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-5
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context")]
    pub context: Option<Vec<StructureDefinitionContext>>,
    /// FHIRPath invariants - when the extension can be used
    /// 
    /// A set of rules as FHIRPath Invariants about when the extension can be used
    /// (e.g. co-occurrence variants for the extension). All the rules must be true.
    /// 
    /// ## Implementation Notes
    /// The rules are only evaluated when the extension is present. When evaluating
    /// the invariant, the FHIRPath focus is the element that holds the extension,
    /// and %extension refers to the extension itself.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-18
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.contextInvariant")]
    #[fhir_serde(rename = "contextInvariant")]
    pub context_invariant: Option<Vec<String>>,
    /// Type defined or constrained by this structure
    /// 
    /// The type this structure describes. If the derivation kind is 'specialization'
    /// then this is the master definition for a type, and there is always one of
    /// these (a data type, an extension, a resource, including abstract ones).
    /// Otherwise the structure definition is a constraint on the stated type (and in
    /// this case, the type cannot be an abstract type). References are URLs that are
    /// relative to http://hl7.org/fhir/StructureDefinition e.g. "string" is a
    /// reference to http://hl7.org/fhir/StructureDefinition/string. Absolute URLs
    /// are only allowed in logical models, where they are required.
    /// 
    /// ## Implementation Notes
    /// Note that in the case of constraints, the type could be determined by chasing
    /// through the baseDefinition references until a type defining structure
    /// (derivation = specialization) is reached, or by looking at the path of the
    /// first element in the snapshot - if present - but providing the type directly
    /// makes for simpler tooling and indexing.
    /// 
    /// The type must match the elements defined in the differential and the
    /// snapshot. For all FHIR defined types, the path name of the element will start
    /// with the type name. For logical models, where the type SHALL be a fully
    /// specified URL, the type name SHOULD start with the final path segment of the
    /// type URL where required. E.g. If the type was
    /// "http://example.org/fhir/MyLogicalModelType", the type name should start with
    /// 'MyLogicalModelType'.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Either a resource or a data type, including logical model types.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/fhir-types
    /// 
    /// ## Conditions
    /// Used when: sdf-18, sdf-11, sdf-5, sdf-8, sdf-8a
    #[fhir_binding(strength="extensible", valueset="http://hl7.org/fhir/ValueSet/fhir-types")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.type")]
    #[fhir_serde(rename = "type")]
    pub r#type: Uri,
    /// Definition that this type is constrained/specialized from
    /// 
    /// An absolute URI that is the base structure from which this type is derived,
    /// either by specialization or constraint.
    /// 
    /// ## Implementation Notes
    /// If differential constraints are specified in this structure, they are applied
    /// to the base in a "differential" fashion. If there is no base, then the
    /// differential constraints cannot be provided (snapshot only). Differential
    /// structures are useful for the editing perspective, and snapshot structures
    /// are suitable for operational use. The FHIR Project provides a number of
    /// tools/services to populate snapshots from differential constraints. Logical
    /// Models have a base of "Base", "Element" or another logical model.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-4, sdf-27
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.baseDefinition")]
    #[fhir_serde(rename = "baseDefinition")]
    pub base_definition: Option<Canonical>,
    /// specialization | constraint - How relates to base definition
    /// 
    /// How the type relates to the baseDefinition.
    /// 
    /// ## Implementation Notes
    /// If the definition is a specialization, then it adds to the differential new
    /// elements and optionally additional rules to an existing concrete type, and
    /// the snapshot includes the inherited elements and rules. If the definition is
    /// a constraint, then it cannot define new elements, it can only make new rules
    /// about existing content (see [Profiling Resources](profiling.html#resources)).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: How a type relates to its baseDefinition.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/type-derivation-rule|5.0.0
    /// 
    /// ## Conditions
    /// Used when: sdf-1, sdf-21, sdf-5, sdf-27, sdf-29
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/type-derivation-rule")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.derivation")]
    pub derivation: Option<Code>,
    /// Snapshot view of the structure
    /// 
    /// A snapshot view is expressed in a standalone form that can be used and
    /// interpreted without considering the base StructureDefinition.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **sdf-3**: Each element definition in a snapshot must have a formal definition and cardinalities, unless model is a logical model (error)
    ///   Expression: `%resource.kind = 'logical' or element.all(definition.exists() and min.exists() and max.exists())`
    /// - **sdf-8**: All snapshot elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models (error)
    ///   Expression: `(%resource.kind = 'logical' or element.first().path = %resource.type) and element.tail().all(path.startsWith(%resource.snapshot.element.first().path&'.'))`
    /// - **sdf-24**: For CodeableReference elements, target profiles must be listed on the CodeableReference, not the CodeableReference.reference (error)
    ///   Expression: `element.where(type.where(code='Reference').exists() and path.endsWith('.reference') and type.targetProfile.exists() and (path.substring(0,$this.path.length()-10) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()`
    /// - **sdf-25**: For CodeableReference elements, bindings must be listed on the CodeableReference, not the CodeableReference.concept (error)
    ///   Expression: `element.where(type.where(code='CodeableConcept').exists() and path.endsWith('.concept') and binding.exists() and (path.substring(0,$this.path.length()-8) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()`
    /// - **sdf-26**: The root element of a profile should not have mustSupport = true (warning)
    ///   Expression: `$this.where(element[0].mustSupport='true').exists().not()`
    /// - **sdf-8b**: All snapshot elements must have a base definition (error)
    ///   Expression: `element.all(base.exists())`
    /// 
    /// ## Conditions
    /// Used when: sdf-11, sdf-1, sdf-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-3", severity="error", human="Each element definition in a snapshot must have a formal definition and cardinalities, unless model is a logical model", expr="%resource.kind = 'logical' or element.all(definition.exists() and min.exists() and max.exists())", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-8", severity="error", human="All snapshot elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models", expr="(%resource.kind = 'logical' or element.first().path = %resource.type) and element.tail().all(path.startsWith(%resource.snapshot.element.first().path&'.'))", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-24", severity="error", human="For CodeableReference elements, target profiles must be listed on the CodeableReference, not the CodeableReference.reference", expr="element.where(type.where(code='Reference').exists() and path.endsWith('.reference') and type.targetProfile.exists() and (path.substring(0,$this.path.length()-10) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-25", severity="error", human="For CodeableReference elements, bindings must be listed on the CodeableReference, not the CodeableReference.concept", expr="element.where(type.where(code='CodeableConcept').exists() and path.endsWith('.concept') and binding.exists() and (path.substring(0,$this.path.length()-8) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-26", severity="warning", human="The root element of a profile should not have mustSupport = true", expr="$this.where(element[0].mustSupport='true').exists().not()", path="StructureDefinition.snapshot")]
    #[fhir_invariant(key="sdf-8b", severity="error", human="All snapshot elements must have a base definition", expr="element.all(base.exists())", path="StructureDefinition.snapshot")]
    pub snapshot: Option<StructureDefinitionSnapshot>,
    /// Differential view of the structure
    /// 
    /// A differential view is expressed relative to the base StructureDefinition - a
    /// statement of differences that it applies.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **sdf-20**: No slicing on the root element (error)
    ///   Expression: `element.where(path.contains('.').not()).slicing.empty()`
    /// - **sdf-8a**: In any differential, all the elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models (error)
    ///   Expression: `(%resource.kind = 'logical' or element.first().path.startsWith(%resource.type)) and (element.tail().empty() or  element.tail().all(path.startsWith(%resource.differential.element.first().path.replaceMatches('\\..*','')&'.')))`
    /// 
    /// ## Conditions
    /// Used when: sdf-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.differential")]
    #[fhir_invariant(key="sdf-20", severity="error", human="No slicing on the root element", expr="element.where(path.contains('.').not()).slicing.empty()", path="StructureDefinition.differential")]
    #[fhir_invariant(key="sdf-8a", severity="error", human="In any differential, all the elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models", expr="(%resource.kind = 'logical' or element.first().path.startsWith(%resource.type)) and (element.tail().empty() or  element.tail().all(path.startsWith(%resource.differential.element.first().path.replaceMatches('\\\\..*','')&'.')))", path="StructureDefinition.differential")]
    pub differential: Option<StructureDefinitionDifferential>,
}

/// If an extension, where it can be used in instances
/// 
/// Identifies the types of resource or data type elements to which the extension
/// can be applied. For more guidance on using the 'context' element, see the
/// [defining extensions page](defining-extensions.html#context).
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Special Semantics
/// - Included in summary
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// 
/// ## Conditions
/// Used when: sdf-5
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context")]
pub struct StructureDefinitionContext {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.context.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.context.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// fhirpath | element | extension
    /// 
    /// Defines how to interpret the expression that defines what the context of the
    /// extension is.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: How an extension context is interpreted.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/extension-context-type|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/extension-context-type")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context.type")]
    #[fhir_serde(rename = "type")]
    pub r#type: Code,
    /// Where the extension can be used in instances
    /// 
    /// An expression that defines where an extension can be used in resources.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.context.expression")]
    pub expression: String,
}

/// Differential view of the structure
/// 
/// A differential view is expressed relative to the base StructureDefinition - a
/// statement of differences that it applies.
/// 
/// ## Cardinality: Optional (0..1)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// - **sdf-20**: No slicing on the root element (error)
///   Expression: `element.where(path.contains('.').not()).slicing.empty()`
/// - **sdf-8a**: In any differential, all the elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models (error)
///   Expression: `(%resource.kind = 'logical' or element.first().path.startsWith(%resource.type)) and (element.tail().empty() or  element.tail().all(path.startsWith(%resource.differential.element.first().path.replaceMatches('\\..*','')&'.')))`
/// 
/// ## Conditions
/// Used when: sdf-6
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.differential")]
#[fhir_invariant(key="sdf-20", severity="error", human="No slicing on the root element", expr="element.where(path.contains('.').not()).slicing.empty()", path="StructureDefinition.differential")]
#[fhir_invariant(key="sdf-8a", severity="error", human="In any differential, all the elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models", expr="(%resource.kind = 'logical' or element.first().path.startsWith(%resource.type)) and (element.tail().empty() or  element.tail().all(path.startsWith(%resource.differential.element.first().path.replaceMatches('\\\\..*','')&'.')))", path="StructureDefinition.differential")]
pub struct StructureDefinitionDifferential {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.differential.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.differential.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.differential.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.differential.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Definition of elements in the resource (if no StructureDefinition)
    /// 
    /// Captures constraints on each element within the resource.
    /// 
    /// ## Cardinality: Required, Multiple (1..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-9, sdf-15a, sdf-19, sdf-17, sdf-23, sdf-22, sdf-14, sdf-21, sdf-29, sdf-20, sdf-8a
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.differential.element")]
    pub element: Option<Vec<ElementDefinition>>,
}

/// External specification that the content is mapped to
/// 
/// An external specification that the content is mapped to.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// - **sdf-2**: Must have at least a name or a uri (or both) (error)
///   Expression: `name.exists() or uri.exists()`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping")]
#[fhir_invariant(key="sdf-2", severity="error", human="Must have at least a name or a uri (or both)", expr="name.exists() or uri.exists()", path="StructureDefinition.mapping")]
pub struct StructureDefinitionMapping {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.mapping.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.mapping.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Internal id when this mapping is used
    /// 
    /// An Internal id that is used to identify this mapping set when specific
    /// mappings are made.
    /// 
    /// ## Implementation Notes
    /// The specification is described once, with general comments, and then specific
    /// mappings are made that reference this declaration.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.identity")]
    pub identity: Id,
    /// Identifies what this mapping refers to
    /// 
    /// An absolute URI that identifies the specification that this mapping is
    /// expressed to.
    /// 
    /// ## Implementation Notes
    /// A formal identity for the specification being mapped to helps with
    /// identifying maps consistently.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-2
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.uri")]
    pub uri: Option<Uri>,
    /// Names what this mapping refers to
    /// 
    /// A name for the specification that is being mapped to.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: sdf-2
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.name")]
    pub name: Option<String>,
    /// Versions, Issues, Scope limitations etc
    /// 
    /// Comments about this mapping, including version notes, issues, scope
    /// limitations, and other important notes for usage.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.mapping.comment")]
    pub comment: Option<String>,
}

/// Snapshot view of the structure
/// 
/// A snapshot view is expressed in a standalone form that can be used and
/// interpreted without considering the base StructureDefinition.
/// 
/// ## Cardinality: Optional (0..1)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// - **sdf-3**: Each element definition in a snapshot must have a formal definition and cardinalities, unless model is a logical model (error)
///   Expression: `%resource.kind = 'logical' or element.all(definition.exists() and min.exists() and max.exists())`
/// - **sdf-8**: All snapshot elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models (error)
///   Expression: `(%resource.kind = 'logical' or element.first().path = %resource.type) and element.tail().all(path.startsWith(%resource.snapshot.element.first().path&'.'))`
/// - **sdf-24**: For CodeableReference elements, target profiles must be listed on the CodeableReference, not the CodeableReference.reference (error)
///   Expression: `element.where(type.where(code='Reference').exists() and path.endsWith('.reference') and type.targetProfile.exists() and (path.substring(0,$this.path.length()-10) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()`
/// - **sdf-25**: For CodeableReference elements, bindings must be listed on the CodeableReference, not the CodeableReference.concept (error)
///   Expression: `element.where(type.where(code='CodeableConcept').exists() and path.endsWith('.concept') and binding.exists() and (path.substring(0,$this.path.length()-8) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()`
/// - **sdf-26**: The root element of a profile should not have mustSupport = true (warning)
///   Expression: `$this.where(element[0].mustSupport='true').exists().not()`
/// - **sdf-8b**: All snapshot elements must have a base definition (error)
///   Expression: `element.all(base.exists())`
/// 
/// ## Conditions
/// Used when: sdf-11, sdf-1, sdf-6
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-3", severity="error", human="Each element definition in a snapshot must have a formal definition and cardinalities, unless model is a logical model", expr="%resource.kind = 'logical' or element.all(definition.exists() and min.exists() and max.exists())", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-8", severity="error", human="All snapshot elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models", expr="(%resource.kind = 'logical' or element.first().path = %resource.type) and element.tail().all(path.startsWith(%resource.snapshot.element.first().path&'.'))", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-24", severity="error", human="For CodeableReference elements, target profiles must be listed on the CodeableReference, not the CodeableReference.reference", expr="element.where(type.where(code='Reference').exists() and path.endsWith('.reference') and type.targetProfile.exists() and (path.substring(0,$this.path.length()-10) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-25", severity="error", human="For CodeableReference elements, bindings must be listed on the CodeableReference, not the CodeableReference.concept", expr="element.where(type.where(code='CodeableConcept').exists() and path.endsWith('.concept') and binding.exists() and (path.substring(0,$this.path.length()-8) in %context.element.where(type.where(code='CodeableReference').exists()).path)).exists().not()", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-26", severity="warning", human="The root element of a profile should not have mustSupport = true", expr="$this.where(element[0].mustSupport='true').exists().not()", path="StructureDefinition.snapshot")]
#[fhir_invariant(key="sdf-8b", severity="error", human="All snapshot elements must have a base definition", expr="element.all(base.exists())", path="StructureDefinition.snapshot")]
pub struct StructureDefinitionSnapshot {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.snapshot.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.snapshot.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.snapshot.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="StructureDefinition.snapshot.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Definition of elements in the resource (if no StructureDefinition)
    /// 
    /// Captures constraints on each element within the resource.
    /// 
    /// ## Cardinality: Required, Multiple (1..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **sdf-10**: provide either a binding reference or a description (or both) (error)
    ///   Expression: `binding.empty() or binding.valueSet.exists() or binding.description.exists()`
    /// - **sdf-28**: If there are no discriminators, there must be a definition (error)
    ///   Expression: `slicing.exists().not() or (slicing.discriminator.exists() or slicing.description.exists())`
    /// 
    /// ## Conditions
    /// Used when: sdf-9, sdf-19, sdf-16, sdf-15, sdf-23, sdf-11, sdf-22, sdf-14, sdf-1, sdf-8, sdf-3, sdf-8b, sdf-24, sdf-25, sdf-26
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="StructureDefinition.snapshot.element")]
    #[fhir_invariant(key="sdf-10", severity="error", human="provide either a binding reference or a description (or both)", expr="binding.empty() or binding.valueSet.exists() or binding.description.exists()", path="StructureDefinition.snapshot.element")]
    #[fhir_invariant(key="sdf-28", severity="error", human="If there are no discriminators, there must be a definition", expr="slicing.exists().not() or (slicing.discriminator.exists() or slicing.description.exists())", path="StructureDefinition.snapshot.element")]
    pub element: Option<Vec<ElementDefinition>>,
}

