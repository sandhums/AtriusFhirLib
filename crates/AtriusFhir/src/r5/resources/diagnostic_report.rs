// AUTO-GENERATED by atrius-fhir-generator (R5 DiagnosticReport)
use crate::r5::*;

/// Choice of types for the effective\[x\] field in DiagnosticReport
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, FhirValidate)]
#[fhir_choice_element(base_name = "effective")]
pub enum DiagnosticReportEffective {
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "effectiveDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Period type.
    #[fhir_serde(rename = "effectivePeriod")]
    Period(Period),
}

/// FHIR DiagnosticReport type
/// 
/// The findings and interpretation of diagnostic tests performed on patients,
/// groups of patients, products, substances, devices, and locations, and/or
/// specimens derived from these. The report includes clinical context such as
/// requesting provider information, and some mix of atomic results, images,
/// textual and coded interpretations, and formatted representation of diagnostic
/// reports. The report also includes non-clinical context such as batch analysis
/// and stability reporting of products and substances.
/// 
/// ## Purpose
/// To support reporting for any diagnostic report into a clinical data repository.
/// 
/// ## Type: Resource type
/// Base type: http://hl7.org/fhir/StructureDefinition/DomainResource
/// 
/// ## Status: draft
/// FHIR Version: 5.0.0
/// 
/// See: [DiagnosticReport](http://hl7.org/fhir/StructureDefinition/DiagnosticReport)
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "effective")]
#[fhir_invariant(key="dgr-1", severity="error", human="When a Composition is referenced in `Diagnostic.composition`, all Observation resources referenced in `Composition.entry` must also be referenced in `Diagnostic.entry` or in the references Observations in `Observation.hasMember`", expr="composition.exists() implies (composition.resolve().section.entry.reference.where(resolve() is Observation) in (result.reference|result.reference.resolve().hasMember.reference))", path="DiagnosticReport")]
#[fhir_invariant(key="dom-2", severity="error", human="If the resource is contained in another resource, it SHALL NOT contain nested Resources", expr="contained.contained.empty()", path="DiagnosticReport")]
#[fhir_invariant(key="dom-3", severity="error", human="If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource", expr="contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().ofType(canonical) | %resource.descendants().ofType(uri) | %resource.descendants().ofType(url))) or descendants().where(reference = '#').exists() or descendants().where(ofType(canonical) = '#').exists() or descendants().where(ofType(canonical) = '#').exists()).not()).trace('unmatched', id).empty()", path="DiagnosticReport")]
#[fhir_invariant(key="dom-4", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated", expr="contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()", path="DiagnosticReport")]
#[fhir_invariant(key="dom-5", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a security label", expr="contained.meta.security.empty()", path="DiagnosticReport")]
#[fhir_invariant(key="dom-6", severity="warning", human="A resource should have narrative for robust management", expr="text.`div`.exists()", path="DiagnosticReport")]
pub struct DiagnosticReport {
    /// Logical id of this artifact
    /// 
    /// The logical id of the resource, as used in the URL for the resource. Once
    /// assigned, this value never changes.
    /// 
    /// ## Implementation Notes
    /// Within the context of the FHIR RESTful interactions, the resource has an id
    /// except for cases like the create and conditional update. Otherwise, the use
    /// of the resouce id depends on the given use case.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    pub id: Option<String>,
    /// Metadata about the resource
    /// 
    /// The metadata about the resource. This is content that is maintained by the
    /// infrastructure. Changes to the content might not always be associated with
    /// version changes to the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.meta")]
    pub meta: Option<Meta>,
    /// A set of rules under which this content was created
    /// 
    /// A reference to a set of rules that were followed when the resource was
    /// constructed, and which must be understood when processing the content. Often,
    /// this is a reference to an implementation guide that defines the special rules
    /// along with other profiles etc.
    /// 
    /// ## Implementation Notes
    /// Asserting this rule set restricts the content to be only understood by a
    /// limited set of trading partners. This inherently limits the usefulness of the
    /// data in the long term. However, the existing health eco-system is highly
    /// fractured, and not yet ready to define, collect, and exchange data in a
    /// generally computable sense. Wherever possible, implementers and/or
    /// specification writers should avoid using this element. Often, when used, the
    /// URL is a reference to an implementation guide that defines these special
    /// rules as part of its narrative along with other profiles, value sets, etc.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the implicit rules may provide additional knowledge about the resource that modifies its meaning or interpretation
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.implicitRules")]
    #[fhir_serde(rename = "implicitRules")]
    pub implicit_rules: Option<Uri>,
    /// Language of the resource content
    /// 
    /// The base language in which the resource is written.
    /// 
    /// ## Implementation Notes
    /// Language is provided to support indexing and accessibility (typically,
    /// services such as text to speech use the language tag). The html language tag
    /// in the narrative applies to the narrative. The language tag on the resource
    /// may be used to specify the language of other presentations generated from the
    /// data in the resource. Not all the content has to be in the base language. The
    /// Resource.language should not be assumed to apply to the narrative
    /// automatically. If a language is specified, it should it also be specified on
    /// the div element in the html (see rules in HTML5 for information about the
    /// relationship between xml:lang and the html lang attribute).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: IETF language tag for a human language
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/all-languages|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/all-languages")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.language")]
    pub language: Option<Code>,
    /// Text summary of the resource, for human interpretation
    /// 
    /// A human-readable narrative that contains a summary of the resource and can be
    /// used to represent the content of the resource to a human. The narrative need
    /// not encode all the structured data, but is required to contain sufficient
    /// detail to make it "clinically safe" for a human to just read the narrative.
    /// Resource definitions may define what content should be represented in the
    /// narrative to ensure clinical safety.
    /// 
    /// ## Implementation Notes
    /// Contained resources do not have a narrative. Resources that are not contained
    /// SHOULD have a narrative. In some cases, a resource may only have text with
    /// little or no additional discrete data (as long as all minOccurs=1 elements
    /// are satisfied). This may be necessary for data from legacy systems where
    /// information is captured as a "text blob" or where text is additionally
    /// entered raw or narrated and encoded information is added later.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// narrative, html, xhtml, display
    /// 
    /// ## Conditions
    /// Used when: dom-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.text")]
    pub text: Option<Narrative>,
    /// Contained, inline Resources
    /// 
    /// These resources do not have an independent existence apart from the resource
    /// that contains them - they cannot be identified independently, nor can they
    /// have their own independent transaction scope. This is allowed to be a
    /// Parameters resource if and only if it is referenced by a resource that
    /// provides context/meaning.
    /// 
    /// ## Implementation Notes
    /// This should never be done when the content can be identified properly, as
    /// once identification is lost, it is extremely difficult (and context
    /// dependent) to restore it again. Contained resources may have profiles and
    /// tags in their meta elements, but SHALL NOT have security labels.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Aliases
    /// inline resources, anonymous resources, contained resources
    /// 
    /// ## Conditions
    /// Used when: dom-2, dom-4, dom-3, dom-5
    pub contained: Option<Vec<Resource>>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource and that modifies the understanding of the element
    /// that contains it and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer is allowed to define an extension, there is a set of requirements
    /// that SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the resource that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Business identifier for report
    /// 
    /// Identifiers assigned to this report by the performer or other systems.
    /// 
    /// ## Requirements
    /// Need to know what identifier to use when making queries about this report
    /// from the source laboratory, and for linking to the report outside FHIR
    /// context.
    /// 
    /// ## Implementation Notes
    /// Usually assigned by the Information System of the diagnostic service provider
    /// (filler id).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// ReportID, Filler ID, Placer ID
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.identifier")]
    pub identifier: Option<Vec<Identifier>>,
    /// What was requested
    /// 
    /// Details concerning a service requested.
    /// 
    /// ## Requirements
    /// This allows tracing of authorization for the report and tracking whether
    /// proposals/recommendations were acted upon.
    /// 
    /// ## Implementation Notes
    /// Note: Usually there is one test request for each result, however in some
    /// circumstances multiple test requests may be represented using a single test
    /// result resource. Note that there are also cases where one request leads to
    /// multiple reports.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Request
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.basedOn")]
    #[fhir_serde(rename = "basedOn")]
    pub based_on: Option<Vec<Reference>>,
    /// registered | partial | preliminary | modified | final | amended | corrected | appended | cancelled | entered-in-error | unknown
    /// 
    /// The status of the diagnostic report.
    /// 
    /// ## Requirements
    /// Diagnostic services routinely issue provisional/incomplete reports, and
    /// sometimes withdraw previously released reports.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because it is a status element that contains status entered-in-error which means that the resource should not be treated as valid
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: The status of the diagnostic report.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/diagnostic-report-status|5.0.0
    #[fhir_binding(strength="required", valueset="http://hl7.org/fhir/ValueSet/diagnostic-report-status")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.status")]
    pub status: Code,
    /// Service category
    /// 
    /// A code that classifies the clinical discipline, department or diagnostic
    /// service that created the report (e.g. cardiology, biochemistry, hematology,
    /// MRI). This is used for searching, sorting and display purposes.
    /// 
    /// ## Implementation Notes
    /// Multiple categories are allowed using various categorization schemes. The
    /// level of granularity is defined by the category concepts in the value set.
    /// More fine-grained filtering can be performed using the metadata and/or
    /// terminology hierarchy in DiagnosticReport.code.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: HL7 V2 table 0074
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/diagnostic-service-sections
    /// 
    /// ## Aliases
    /// Department, Sub-department, Service, Discipline
    #[fhir_binding(strength="example", valueset="http://hl7.org/fhir/ValueSet/diagnostic-service-sections")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.category")]
    pub category: Option<Vec<CodeableConcept>>,
    /// Name/Code for this diagnostic report
    /// 
    /// A code or name that describes this diagnostic report.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: preferred
    /// - **Description**: LOINC Codes for Diagnostic Reports
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/report-codes
    /// 
    /// ## Aliases
    /// Type
    #[fhir_binding(strength="preferred", valueset="http://hl7.org/fhir/ValueSet/report-codes")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.code")]
    pub code: CodeableConcept,
    /// The subject of the report - usually, but not always, the patient
    /// 
    /// The subject of the report. Usually, but not always, this is a patient.
    /// However, diagnostic services also perform analyses on specimens collected
    /// from a variety of other sources.
    /// 
    /// ## Requirements
    /// SHALL know the subject context.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Patient
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.subject")]
    pub subject: Option<Reference>,
    /// Health care event when test ordered
    /// 
    /// The healthcare event (e.g. a patient and healthcare provider interaction)
    /// which this DiagnosticReport is about.
    /// 
    /// ## Requirements
    /// Links the request to the Encounter context.
    /// 
    /// ## Implementation Notes
    /// This will typically be the encounter the event occurred within, but some
    /// events may be initiated prior to or after the official completion of an
    /// encounter but still be tied to the context of the encounter (e.g.
    /// pre-admission laboratory tests).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Context
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.encounter")]
    pub encounter: Option<Reference>,
    /// Clinically relevant time/time-period for report
    /// 
    /// The time or time-period the observed values are related to. When the subject
    /// of the report is a patient, this is usually either the time of the procedure
    /// or of specimen collection(s), but very often the source of the date/time is
    /// not known, only the date/time itself.
    /// 
    /// ## Requirements
    /// Need to know where in the patient history to file/present this report.
    /// 
    /// ## Implementation Notes
    /// If the diagnostic procedure was performed on the patient, this is the time it
    /// was performed. If there are specimens, the diagnostically relevant time can
    /// be derived from the specimen collection times, but the specimen information
    /// is not always available, and the exact relationship between the specimens and
    /// the diagnostically relevant time is not always automatic.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Observation time, Effective Time, Occurrence
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.effective[x]")]
    #[fhir_serde(flatten)]
    pub effective: Option<DiagnosticReportEffective>,
    /// DateTime this version was made
    /// 
    /// The date and time that this version of the report was made available to
    /// providers, typically after the report was reviewed and verified.
    /// 
    /// ## Requirements
    /// Clinicians need to be able to check the date that the report was released.
    /// 
    /// ## Implementation Notes
    /// May be different from the update time of the resource itself, because that is
    /// the status of the record (potentially a secondary copy), not the actual
    /// release time of the report.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Date published, Date Issued, Date Verified
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.issued")]
    pub issued: Option<Instant>,
    /// Responsible Diagnostic Service
    /// 
    /// The diagnostic service that is responsible for issuing the report.
    /// 
    /// ## Requirements
    /// Need to know whom to contact if there are queries about the results. Also may
    /// need to track the source of reports for secondary data analysis.
    /// 
    /// ## Implementation Notes
    /// This is not necessarily the source of the atomic data items or the entity
    /// that interpreted the results. It is the entity that takes responsibility for
    /// the clinical report.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Laboratory, Service, Practitioner, Department, Company, Authorized by, Director
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.performer")]
    pub performer: Option<Vec<Reference>>,
    /// Primary result interpreter
    /// 
    /// The practitioner or organization that is responsible for the report's
    /// conclusions and interpretations.
    /// 
    /// ## Requirements
    /// Need to know whom to contact if there are queries about the results. Also may
    /// need to track the source of reports for secondary data analysis.
    /// 
    /// ## Implementation Notes
    /// Might not be the same entity that takes responsibility for the clinical
    /// report.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Analyzed by, Reported by
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.resultsInterpreter")]
    #[fhir_serde(rename = "resultsInterpreter")]
    pub results_interpreter: Option<Vec<Reference>>,
    /// Specimens this report is based on
    /// 
    /// Details about the specimens on which this diagnostic report is based.
    /// 
    /// ## Requirements
    /// Need to be able to report information about the collected specimens on which
    /// the report is based.
    /// 
    /// ## Implementation Notes
    /// If the specimen is sufficiently specified with a code in the test result
    /// name, then this additional data may be redundant. If there are multiple
    /// specimens, these may be represented per observation or group.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.specimen")]
    pub specimen: Option<Vec<Reference>>,
    /// Observations
    /// 
    /// [Observations](observation.html)  that are part of this diagnostic report.
    /// 
    /// ## Requirements
    /// Need to support individual results, or groups of results, where the result
    /// grouping is arbitrary, but meaningful.
    /// 
    /// ## Implementation Notes
    /// Observations can contain observations.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Data, Atomic Value, Result, Atomic result, Data, Test, Analyte, Battery, Organizer
    /// 
    /// ## Conditions
    /// Used when: dgr-1
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.result")]
    pub result: Option<Vec<Reference>>,
    /// Comments about the diagnostic report
    /// 
    /// Comments about the diagnostic report.
    /// 
    /// ## Requirements
    /// Need to be able to provide free text additional information.
    /// 
    /// ## Implementation Notes
    /// May include general statements about the diagnostic report, or statements
    /// about significant, unexpected or unreliable results values contained within
    /// the diagnostic report, or information about its source when relevant to its
    /// interpretation.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.note")]
    pub note: Option<Vec<Annotation>>,
    /// Reference to full details of an analysis associated with the diagnostic report
    /// 
    /// One or more links to full details of any study performed during the
    /// diagnostic investigation. An ImagingStudy might comprise a set of radiologic
    /// images obtained via a procedure that are analyzed as a group. Typically, this
    /// is imaging performed by DICOM enabled modalities, but this is not required. A
    /// fully enabled PACS viewer can use this information to provide views of the
    /// source images. A GenomicStudy might comprise one or more analyses, each
    /// serving a specific purpose. These analyses may vary in method (e.g.,
    /// karyotyping, CNV, or SNV detection), performer, software, devices used, or
    /// regions targeted.
    /// 
    /// ## Implementation Notes
    /// For laboratory-type studies like GenomeStudy, type resources will be used for
    /// tracking additional metadata and workflow aspects of complex studies.
    /// ImagingStudy and the media element are somewhat overlapping - typically, the
    /// list of image references in the media element will also be found in one of
    /// the imaging study resources. However, each caters to different types of
    /// displays for different types of purposes. Neither, either, or both may be
    /// provided.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.study")]
    pub study: Option<Vec<Reference>>,
    /// Additional information supporting the diagnostic report
    /// 
    /// This backbone element contains supporting information that was used in the
    /// creation of the report not included in the results already included in the
    /// report.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo")]
    #[fhir_serde(rename = "supportingInfo")]
    pub supporting_info: Option<Vec<DiagnosticReportSupportingInfo>>,
    /// Key images or data associated with this report
    /// 
    /// A list of key images or data associated with this report. The images or data
    /// are generally created during the diagnostic process, and may be directly of
    /// the patient, or of treated specimens (i.e. slides of interest).
    /// 
    /// ## Requirements
    /// Many diagnostic services include images or data in the report as part of
    /// their service.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// DICOM, Slides, Scans
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media")]
    pub media: Option<Vec<DiagnosticReportMedia>>,
    /// Reference to a Composition resource for the DiagnosticReport structure
    /// 
    /// Reference to a Composition resource instance that provides structure for
    /// organizing the contents of the DiagnosticReport.
    /// 
    /// ## Implementation Notes
    /// The Composition provides structure to the content of the DiagnosticReport
    /// (and only contains contents referenced in the DiagnosticReport) - e.g., to
    /// order the sections of an anatomic pathology structured report.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: dgr-1
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.composition")]
    pub composition: Option<Reference>,
    /// Clinical conclusion (interpretation) of test results
    /// 
    /// Concise and clinically contextualized summary conclusion
    /// (interpretation/impression) of the diagnostic report.
    /// 
    /// ## Requirements
    /// Need to be able to provide a conclusion that is not lost among the basic
    /// result data.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Report
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.conclusion")]
    pub conclusion: Option<Markdown>,
    /// Codes for the clinical conclusion of test results
    /// 
    /// One or more codes that represent the summary conclusion
    /// (interpretation/impression) of the diagnostic report.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: SNOMED CT Clinical Findings
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/clinical-findings
    #[fhir_binding(strength="example", valueset="http://hl7.org/fhir/ValueSet/clinical-findings")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.conclusionCode")]
    #[fhir_serde(rename = "conclusionCode")]
    pub conclusion_code: Option<Vec<CodeableConcept>>,
    /// Entire report as issued
    /// 
    /// Rich text representation of the entire result as issued by the diagnostic
    /// service. Multiple formats are allowed but they SHALL be semantically
    /// equivalent.
    /// 
    /// ## Requirements
    /// Gives laboratory the ability to provide its own fully formatted report for
    /// clinical fidelity.
    /// 
    /// ## Implementation Notes
    /// "application/pdf" is recommended as the most reliable and interoperable in
    /// this context.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.presentedForm")]
    #[fhir_serde(rename = "presentedForm")]
    pub presented_form: Option<Vec<Attachment>>,
}

/// Key images or data associated with this report
/// 
/// A list of key images or data associated with this report. The images or data
/// are generally created during the diagnostic process, and may be directly of
/// the patient, or of treated specimens (i.e. slides of interest).
/// 
/// ## Requirements
/// Many diagnostic services include images or data in the report as part of
/// their service.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Special Semantics
/// - Included in summary
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// 
/// ## Aliases
/// DICOM, Slides, Scans
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media")]
pub struct DiagnosticReportMedia {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.media.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.media.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Comment about the image or data (e.g. explanation)
    /// 
    /// A comment about the image or data. Typically, this is used to provide an
    /// explanation for why the image or data is included, or to draw the viewer's
    /// attention to important features.
    /// 
    /// ## Requirements
    /// The provider of the report should make a comment about each image or data
    /// included in the report.
    /// 
    /// ## Implementation Notes
    /// The comment should be displayed with the image or data. It would be common
    /// for the report to include additional discussion of the image or data contents
    /// or in other sections such as the conclusion.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media.comment")]
    pub comment: Option<String>,
    /// Reference to the image or data source
    /// 
    /// Reference to the image or data source.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.media.link")]
    pub link: Reference,
}

/// Additional information supporting the diagnostic report
/// 
/// This backbone element contains supporting information that was used in the
/// creation of the report not included in the results already included in the
/// report.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo")]
pub struct DiagnosticReportSupportingInfo {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.supportingInfo.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="DiagnosticReport.supportingInfo.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Supporting information role code
    /// 
    /// The code value for the role of the supporting information in the diagnostic
    /// report.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: The code value for the role of the supporting information in the diagnostic report.
    /// - **ValueSet**: http://terminology.hl7.org/ValueSet/v2-0936
    #[fhir_binding(strength="example", valueset="http://terminology.hl7.org/ValueSet/v2-0936")]
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo.type")]
    #[fhir_serde(rename = "type")]
    pub r#type: CodeableConcept,
    /// Supporting information reference
    /// 
    /// The reference for the supporting information in the diagnostic report.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="DiagnosticReport.supportingInfo.reference")]
    pub reference: Reference,
}

