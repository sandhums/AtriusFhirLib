// AUTO-GENERATED by atrius-fhir-generator (R5 QuestionnaireResponse)
use crate::r5::*;

/// FHIR QuestionnaireResponse type
/// 
/// A structured set of questions and their answers. The questions are ordered
/// and grouped into coherent subsets, corresponding to the structure of the
/// grouping of the questionnaire being responded to.
/// 
/// ## Purpose
/// To support structured, hierarchical reporting of data gathered using digital forms and other questionnaires.
/// 
/// ## Type: Resource type
/// Base type: http://hl7.org/fhir/StructureDefinition/DomainResource
/// 
/// ## Status: draft
/// FHIR Version: 5.0.0
/// 
/// See: [QuestionnaireResponse](http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse)
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="dom-2", severity="error", human="If the resource is contained in another resource, it SHALL NOT contain nested Resources", expr="contained.contained.empty()", path="QuestionnaireResponse")]
#[fhir_invariant(key="dom-3", severity="error", human="If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource", expr="contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().ofType(canonical) | %resource.descendants().ofType(uri) | %resource.descendants().ofType(url))) or descendants().where(reference = '#').exists() or descendants().where(ofType(canonical) = '#').exists() or descendants().where(ofType(canonical) = '#').exists()).not()).trace('unmatched', id).empty()", path="QuestionnaireResponse")]
#[fhir_invariant(key="dom-4", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated", expr="contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()", path="QuestionnaireResponse")]
#[fhir_invariant(key="dom-5", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a security label", expr="contained.meta.security.empty()", path="QuestionnaireResponse")]
#[fhir_invariant(key="dom-6", severity="warning", human="A resource should have narrative for robust management", expr="text.`div`.exists()", path="QuestionnaireResponse")]
pub struct QuestionnaireResponse {
    /// Logical id of this artifact
    /// 
    /// The logical id of the resource, as used in the URL for the resource. Once
    /// assigned, this value never changes.
    /// 
    /// ## Implementation Notes
    /// Within the context of the FHIR RESTful interactions, the resource has an id
    /// except for cases like the create and conditional update. Otherwise, the use
    /// of the resouce id depends on the given use case.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    pub id: Option<String>,
    /// Metadata about the resource
    /// 
    /// The metadata about the resource. This is content that is maintained by the
    /// infrastructure. Changes to the content might not always be associated with
    /// version changes to the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.meta")]
    pub meta: Option<Meta>,
    /// A set of rules under which this content was created
    /// 
    /// A reference to a set of rules that were followed when the resource was
    /// constructed, and which must be understood when processing the content. Often,
    /// this is a reference to an implementation guide that defines the special rules
    /// along with other profiles etc.
    /// 
    /// ## Implementation Notes
    /// Asserting this rule set restricts the content to be only understood by a
    /// limited set of trading partners. This inherently limits the usefulness of the
    /// data in the long term. However, the existing health eco-system is highly
    /// fractured, and not yet ready to define, collect, and exchange data in a
    /// generally computable sense. Wherever possible, implementers and/or
    /// specification writers should avoid using this element. Often, when used, the
    /// URL is a reference to an implementation guide that defines these special
    /// rules as part of its narrative along with other profiles, value sets, etc.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the implicit rules may provide additional knowledge about the resource that modifies its meaning or interpretation
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.implicitRules")]
    #[fhir_serde(rename = "implicitRules")]
    pub implicit_rules: Option<Uri>,
    /// Language of the resource content
    /// 
    /// The base language in which the resource is written.
    /// 
    /// ## Implementation Notes
    /// Language is provided to support indexing and accessibility (typically,
    /// services such as text to speech use the language tag). The html language tag
    /// in the narrative applies to the narrative. The language tag on the resource
    /// may be used to specify the language of other presentations generated from the
    /// data in the resource. Not all the content has to be in the base language. The
    /// Resource.language should not be assumed to apply to the narrative
    /// automatically. If a language is specified, it should it also be specified on
    /// the div element in the html (see rules in HTML5 for information about the
    /// relationship between xml:lang and the html lang attribute).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: IETF language tag for a human language
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/all-languages|5.0.0
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.language")]
    pub language: Option<Code>,
    /// Text summary of the resource, for human interpretation
    /// 
    /// A human-readable narrative that contains a summary of the resource and can be
    /// used to represent the content of the resource to a human. The narrative need
    /// not encode all the structured data, but is required to contain sufficient
    /// detail to make it "clinically safe" for a human to just read the narrative.
    /// Resource definitions may define what content should be represented in the
    /// narrative to ensure clinical safety.
    /// 
    /// ## Implementation Notes
    /// Contained resources do not have a narrative. Resources that are not contained
    /// SHOULD have a narrative. In some cases, a resource may only have text with
    /// little or no additional discrete data (as long as all minOccurs=1 elements
    /// are satisfied). This may be necessary for data from legacy systems where
    /// information is captured as a "text blob" or where text is additionally
    /// entered raw or narrated and encoded information is added later.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// narrative, html, xhtml, display
    /// 
    /// ## Conditions
    /// Used when: dom-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.text")]
    pub text: Option<Narrative>,
    /// Contained, inline Resources
    /// 
    /// These resources do not have an independent existence apart from the resource
    /// that contains them - they cannot be identified independently, nor can they
    /// have their own independent transaction scope. This is allowed to be a
    /// Parameters resource if and only if it is referenced by a resource that
    /// provides context/meaning.
    /// 
    /// ## Implementation Notes
    /// This should never be done when the content can be identified properly, as
    /// once identification is lost, it is extremely difficult (and context
    /// dependent) to restore it again. Contained resources may have profiles and
    /// tags in their meta elements, but SHALL NOT have security labels.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Aliases
    /// inline resources, anonymous resources, contained resources
    /// 
    /// ## Conditions
    /// Used when: dom-2, dom-4, dom-3, dom-5
    pub contained: Option<Vec<Resource>>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource and that modifies the understanding of the element
    /// that contains it and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer is allowed to define an extension, there is a set of requirements
    /// that SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the resource that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Business identifier for this set of answers
    /// 
    /// Business identifiers assigned to this questionnaire response by the performer
    /// and/or other systems. These identifiers remain constant as the resource is
    /// updated and propagates from server to server.
    /// 
    /// ## Requirements
    /// Allows identification of the questionnaire response as it is known by various
    /// participating systems and in a way that remains consistent across servers.
    /// 
    /// ## Implementation Notes
    /// Note: This is a business identifier, not a resource identifier (see
    /// [discussion](resource.html#identifiers)).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.identifier")]
    pub identifier: Option<Vec<Identifier>>,
    /// Request fulfilled by this QuestionnaireResponse
    /// 
    /// A plan, proposal or order that is fulfilled in whole or in part by this
    /// questionnaire response. For example, a ServiceRequest seeking an intake
    /// assessment or a decision support recommendation to assess for post-partum
    /// depression.
    /// 
    /// ## Requirements
    /// Supports traceability of responsibility for the questionnaire response and
    /// allows linkage of the response to the proposals/recommendations acted upon.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// order
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.basedOn")]
    #[fhir_serde(rename = "basedOn")]
    pub based_on: Option<Vec<Reference>>,
    /// Part of referenced event
    /// 
    /// A procedure or observation that this questionnaire was performed as part of
    /// the execution of. For example, the surgery a checklist was executed as part
    /// of.
    /// 
    /// ## Implementation Notes
    /// Not to be used to link an questionnaire response to an Encounter - use
    /// 'context' for that.
    /// 
    /// Composition of questionnaire responses will be handled using the Assemble
    /// operation defined in the SDC IG. For relationships to referrals, and other
    /// types of requests, use basedOn.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.partOf")]
    #[fhir_serde(rename = "partOf")]
    pub part_of: Option<Vec<Reference>>,
    /// Canonical URL of Questionnaire being answered
    /// 
    /// The Questionnaire that defines and organizes the questions for which answers
    /// are being provided.
    /// 
    /// ## Requirements
    /// Needed to allow editing of the questionnaire response in a manner that
    /// enforces the constraints of the original form.
    /// 
    /// ## Implementation Notes
    /// If a QuestionnaireResponse references a Questionnaire that can be resolved,
    /// then the QuestionnaireResponse structure must be consistent with the
    /// Questionnaire (i.e. questions must be organized into the same groups, nested
    /// questions must still be nested, etc.). It is possible to have a
    /// QuestionnaireResponse whose 'questionnaire' element does not resolve. It is
    /// also possible for the questionnaire element to not have a value but only
    /// extensions (e.g. conveying the title or identifier for the questionnaire).
    /// This may happen for legacy data. If there is no formally defined
    /// Questionnaire, it is undefined what the 'correct' values for the linkId
    /// elements should be and it is possible that linkIds might be inconsistent for
    /// QuestionnaireResponses for the same form if captured by distinct systems.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Form
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.questionnaire")]
    pub questionnaire: Canonical,
    /// in-progress | completed | amended | entered-in-error | stopped
    /// 
    /// The current state of the questionnaire response.
    /// 
    /// ## Requirements
    /// The information on Questionnaire resources may possibly be gathered during
    /// multiple sessions and altered after considered being finished.
    /// 
    /// ## Implementation Notes
    /// Unknown does not represent "other" - one of the defined statuses must apply.
    /// Unknown is used when the authoring system is not sure what the current status
    /// is.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labelled as a modifier because it is a status element that contains status entered-in-error which means that the resource should not be treated as valid
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Lifecycle status of the questionnaire response.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/questionnaire-answers-status|5.0.0
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.status")]
    pub status: Code,
    /// The subject of the questions
    /// 
    /// The subject of the questionnaire response. This could be a patient,
    /// organization, practitioner, device, etc. This is who/what the answers apply
    /// to, but is not necessarily the source of information.
    /// 
    /// ## Requirements
    /// Links the questionnaire response to the Patient context. May also affect
    /// access control.
    /// 
    /// ## Implementation Notes
    /// If the Questionnaire declared a subjectType, the resource pointed to by this
    /// element must be an instance of one of the listed types.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Patient, Focus
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.subject")]
    pub subject: Option<Reference>,
    /// Encounter the questionnaire response is part of
    /// 
    /// The Encounter during which this questionnaire response was created or to
    /// which the creation of this record is tightly associated.
    /// 
    /// ## Requirements
    /// Links the questionnaire response to the Encounter context. May also affect
    /// access control.
    /// 
    /// ## Implementation Notes
    /// This will typically be the encounter the questionnaire response was created
    /// during, but some questionnaire responses may be initiated prior to or after
    /// the official completion of an encounter but still be tied to the context of
    /// the encounter (e.g. pre-admission forms). A questionnaire that was initiated
    /// during an encounter but not fully completed during the encounter would still
    /// generally be associated with the encounter.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.encounter")]
    pub encounter: Option<Reference>,
    /// Date the answers were gathered
    /// 
    /// The date and/or time that this questionnaire response was last modified by
    /// the user - e.g. changing answers or revising status.
    /// 
    /// ## Requirements
    /// Clinicians need to be able to check the date that the information in the
    /// questionnaire was collected, to derive the context of the answers.
    /// 
    /// ## Implementation Notes
    /// May be different from the lastUpdateTime of the resource itself, because that
    /// reflects when the data was known to the server, not when the data was
    /// captured.
    /// 
    /// This element is optional to allow for systems that might not know the value,
    /// however it SHOULD be populated if possible.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Date Created, Date published, Date Issued, Date updated
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.authored")]
    pub authored: Option<DateTime>,
    /// The individual or device that received and recorded the answers
    /// 
    /// The individual or device that received the answers to the questions in the
    /// QuestionnaireResponse and recorded them in the system.
    /// 
    /// ## Requirements
    /// Need to know who interpreted the subject's answers to the questions in the
    /// questionnaire, and selected the appropriate options for answers.
    /// 
    /// ## Implementation Notes
    /// Mapping a subject's answers to multiple choice options and determining what
    /// to put in the textual answer is a matter of interpretation. Authoring by
    /// device would indicate that some portion of the questionnaire had been
    /// auto-populated. Device should only be used if it directly determined the
    /// answers, not if it was merely used as a capture tool to record answers
    /// provided by others. In the latter case, information about the physical
    /// device, software, etc. would be captured using Provenance.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Laboratory, Service, Practitioner, Department, Company, Performer
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.author")]
    pub author: Option<Reference>,
    /// The individual or device that answered the questions
    /// 
    /// The individual or device that answered the questions about the subject.
    /// 
    /// ## Requirements
    /// When answering questions about a subject that is minor, incapable of
    /// answering or an animal, another human source may answer the questions.
    /// 
    /// ## Implementation Notes
    /// If not specified, no inference can be made about who provided the data.
    /// Device should only be used if it directly determined the answers, not if it
    /// was merely used as a capture tool to record answers provided by others. In
    /// the latter case, information about the physical device, software, etc. would
    /// be captured using Provenance.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.source")]
    pub source: Option<Reference>,
    /// Groups and questions
    /// 
    /// A group or question item from the original questionnaire for which answers
    /// are provided.
    /// 
    /// ## Implementation Notes
    /// Groups cannot have answers and therefore must nest directly within item. When
    /// dealing with questions, nesting must occur within each answer because some
    /// questions may have multiple answers (and the nesting occurs for each
    /// answer).\nWhen dealing with repeating items, each group repetition will be
    /// handled by a separate item. However, repeating questions are handled with a
    /// single question item and potentially multiple answers.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **qrs-1**: Item cannot contain both item and answer (error)
    ///   Expression: `(answer.exists() and item.exists()).not()`
    /// - **qrs-2**: Repeated answers are combined in the answers array of a single item (error)
    ///   Expression: `repeat(answer|item).select(item.where(answer.value.exists()).linkId.isDistinct()).allTrue()`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item")]
    #[fhir_invariant(key="qrs-1", severity="error", human="Item cannot contain both item and answer", expr="(answer.exists() and item.exists()).not()", path="QuestionnaireResponse.item")]
    #[fhir_invariant(key="qrs-2", severity="error", human="Repeated answers are combined in the answers array of a single item", expr="repeat(answer|item).select(item.where(answer.value.exists()).linkId.isDistinct()).allTrue()", path="QuestionnaireResponse.item")]
    pub item: Option<Vec<QuestionnaireResponseItem>>,
}

/// Groups and questions
/// 
/// A group or question item from the original questionnaire for which answers
/// are provided.
/// 
/// ## Implementation Notes
/// Groups cannot have answers and therefore must nest directly within item. When
/// dealing with questions, nesting must occur within each answer because some
/// questions may have multiple answers (and the nesting occurs for each
/// answer).\nWhen dealing with repeating items, each group repetition will be
/// handled by a separate item. However, repeating questions are handled with a
/// single question item and potentially multiple answers.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// - **qrs-1**: Item cannot contain both item and answer (error)
///   Expression: `(answer.exists() and item.exists()).not()`
/// - **qrs-2**: Repeated answers are combined in the answers array of a single item (error)
///   Expression: `repeat(answer|item).select(item.where(answer.value.exists()).linkId.isDistinct()).allTrue()`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item")]
#[fhir_invariant(key="qrs-1", severity="error", human="Item cannot contain both item and answer", expr="(answer.exists() and item.exists()).not()", path="QuestionnaireResponse.item")]
#[fhir_invariant(key="qrs-2", severity="error", human="Repeated answers are combined in the answers array of a single item", expr="repeat(answer|item).select(item.where(answer.value.exists()).linkId.isDistinct()).allTrue()", path="QuestionnaireResponse.item")]
pub struct QuestionnaireResponseItem {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.item.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.item.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Pointer to specific item from Questionnaire
    /// 
    /// The item from the Questionnaire that corresponds to this item in the
    /// QuestionnaireResponse resource.
    /// 
    /// ## Requirements
    /// Items can repeat in the answers, so a direct 1..1 correspondence by position
    /// might not exist - requiring correspondence by identifier.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: qrs-2
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.linkId")]
    #[fhir_serde(rename = "linkId")]
    pub link_id: String,
    /// ElementDefinition - details for the item
    /// 
    /// A reference to an [ElementDefinition](elementdefinition.html) that provides
    /// the details for the item.
    /// 
    /// ## Requirements
    /// A common pattern is to define a set of data elements, and then build multiple
    /// different questionnaires for different circumstances to gather the data. This
    /// element provides traceability to the common definition.
    /// 
    /// ## Implementation Notes
    /// The ElementDefinition must be in a
    /// [StructureDefinition](structuredefinition.html#), and must have a fragment
    /// identifier that identifies the specific data element by its id (Element.id).
    /// E.g.
    /// http://hl7.org/fhir/StructureDefinition/Observation#Observation.value[x].
    /// 
    /// There is no need for this element if the item pointed to by the linkId has a
    /// definition listed.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.definition")]
    pub definition: Option<Uri>,
    /// Name for group or question text
    /// 
    /// Text that is displayed above the contents of the group or as the text of the
    /// question being answered.
    /// 
    /// ## Requirements
    /// Allows the questionnaire response to be read without access to the
    /// questionnaire.
    /// 
    /// ## Implementation Notes
    /// The text for an item SHOULD be identical to the text from the corresponding
    /// Questionnaire.item. This can't be strictly enforced because it's possible for
    /// the Questionnaire to be updated subsequent to the QuestionnaireResponse
    /// having been created, however the intention is that the text in the
    /// QuestionnaireResponse reflects what the user saw when completing the
    /// Questionnaire.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.text")]
    pub text: Option<String>,
    /// The response(s) to the question
    /// 
    /// The respondent's answer(s) to the question.
    /// 
    /// ## Implementation Notes
    /// The value is nested because we cannot have a repeating structure that has
    /// variable type.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: qrs-1, qrs-2
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer")]
    pub answer: Option<Vec<QuestionnaireResponseItemAnswer>>,
    /// Child items of group item
    /// 
    /// Sub-questions, sub-groups or display items nested beneath a group.
    /// 
    /// ## Requirements
    /// Reports can consist of complex nested groups.
    /// 
    /// ## Implementation Notes
    /// Only used when nesting beneath a group - see item.answer.item for nesting
    /// beneath questions
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.item")]
    pub item: Option<Vec<QuestionnaireResponseItem>>,
}

/// Choice of types for the value\[x\] field in QuestionnaireResponseItemAnswer
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath)]
#[fhir_choice_element(base_name = "value")]
pub enum QuestionnaireResponseItemAnswerValue {
    /// Variant accepting the Boolean type.
    #[fhir_serde(rename = "valueBoolean")]
    Boolean(Boolean),
    /// Variant accepting the Decimal type.
    #[fhir_serde(rename = "valueDecimal")]
    Decimal(Decimal),
    /// Variant accepting the Integer type.
    #[fhir_serde(rename = "valueInteger")]
    Integer(Integer),
    /// Variant accepting the Date type.
    #[fhir_serde(rename = "valueDate")]
    Date(Date),
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "valueDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Time type.
    #[fhir_serde(rename = "valueTime")]
    Time(Time),
    /// Variant accepting the String type.
    #[fhir_serde(rename = "valueString")]
    String(String),
    /// Variant accepting the Uri type.
    #[fhir_serde(rename = "valueUri")]
    Uri(Uri),
    /// Variant accepting the Attachment type.
    #[fhir_serde(rename = "valueAttachment")]
    Attachment(Attachment),
    /// Variant accepting the Coding type.
    #[fhir_serde(rename = "valueCoding")]
    Coding(Coding),
    /// Variant accepting the Quantity type.
    #[fhir_serde(rename = "valueQuantity")]
    Quantity(Quantity),
    /// Variant accepting the Reference type.
    #[fhir_serde(rename = "valueReference")]
    Reference(Reference),
}

/// The response(s) to the question
/// 
/// The respondent's answer(s) to the question.
/// 
/// ## Implementation Notes
/// The value is nested because we cannot have a repeating structure that has
/// variable type.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// 
/// ## Conditions
/// Used when: qrs-1, qrs-2
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "value")]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer")]
pub struct QuestionnaireResponseItemAnswer {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.item.answer.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="QuestionnaireResponse.item.answer.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Single-valued answer to the question
    /// 
    /// The answer (or one of the answers) provided by the respondent to the
    /// question.
    /// 
    /// ## Requirements
    /// Ability to retain a single-valued answer to a question.
    /// 
    /// ## Implementation Notes
    /// More complex structures (Attachment, Resource and Quantity) will typically be
    /// limited to electronic forms that can expose an appropriate user interface to
    /// capture the components and enforce the constraints of a complex data type.
    /// Additional complex types can be introduced through extensions. Must match the
    /// datatype specified by Questionnaire.item.type in the corresponding
    /// Questionnaire. Note that a question is answered using one of the possible
    /// choices defined with answerOption, answerValueSet or some other means and the
    /// answer has a complex data type, all elements within the answer in the
    /// QuestionnaireResponse **SHOULD** match the elements defined corresponding
    /// choice value in the Questionnaire. However, it is possible that not all
    /// elements will be propagated. Also, some systems might use language
    /// translations resulting in different displays. Comparison of value to the
    /// values defined in the Questionnaire (whether by answerOption, answerValueSet
    /// or answerExpression) **SHALL NOT** pay attention to Coding.display,
    /// Reference.display, Quantity.unit unless those are the only elements present.
    /// As well, systems are not required to check for a match on any extensions
    /// (e.g. ordinal values, translations, etc.). Systems **MAY** enforce that if
    /// extensions such as ordinal values are present in both Questionnaire and
    /// QuestionnaireResponse, they match.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Binding this is problematic because one value set can't apply to both codes and quantities.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/questionnaire-answers
    /// 
    /// ## Conditions
    /// Used when: qrs-2
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer.value[x]")]
    #[fhir_serde(flatten)]
    pub value: Option<QuestionnaireResponseItemAnswerValue>,
    /// Child items of question
    /// 
    /// Nested groups and/or questions found within this particular answer.
    /// 
    /// ## Requirements
    /// It is useful to have "sub-questions", questions which normally appear when
    /// certain answers are given and which collect additional details.
    /// 
    /// ## Implementation Notes
    /// Only used when nesting beneath a question - see item.item for nesting beneath
    /// groups
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="QuestionnaireResponse.item.answer.item")]
    pub item: Option<Vec<QuestionnaireResponseItem>>,
}

