// AUTO-GENERATED by atrius-fhir-generator (R6 AllergyIntolerance)
use crate::r6::*;

/// Choice of types for the onset\[x\] field in AllergyIntolerance
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath)]
#[fhir_choice_element(base_name = "onset")]
pub enum AllergyIntoleranceOnset {
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "onsetDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Age type.
    #[fhir_serde(rename = "onsetAge")]
    Age(Age),
    /// Variant accepting the Period type.
    #[fhir_serde(rename = "onsetPeriod")]
    Period(Period),
    /// Variant accepting the Range type.
    #[fhir_serde(rename = "onsetRange")]
    Range(Range),
    /// Variant accepting the String type.
    #[fhir_serde(rename = "onsetString")]
    String(String),
}

/// FHIR AllergyIntolerance type
/// 
/// Risk of harmful or undesirable, physiological response which is unique to an
/// individual and associated with exposure to a substance.
/// 
/// ## Purpose
/// To record a clinical assessment of a propensity, or potential risk to an individual, of an adverse reaction upon future exposure to the specified substance, or class of substance.
/// 
/// ## Type: Resource type
/// Base type: http://hl7.org/fhir/StructureDefinition/DomainResource
/// 
/// ## Status: active
/// FHIR Version: 6.0.0-ballot3
/// 
/// See: [AllergyIntolerance](http://hl7.org/fhir/StructureDefinition/AllergyIntolerance)
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "onset")]
#[fhir_invariant(key="dom-2", severity="error", human="If the resource is contained in another resource, it SHALL NOT contain nested Resources", expr="contained.contained.empty()", path="AllergyIntolerance")]
#[fhir_invariant(key="dom-3", severity="error", human="If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource", expr="contained.where((('#'+id.trace('id') in %resource.descendants().select(reference | as(uri))) or descendants().where(reference='#' | as(uri)='#').exists()).not()).trace('unmatched', id).empty()", path="AllergyIntolerance")]
#[fhir_invariant(key="dom-4", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated", expr="contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()", path="AllergyIntolerance")]
#[fhir_invariant(key="dom-5", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a security label", expr="contained.meta.security.empty()", path="AllergyIntolerance")]
#[fhir_invariant(key="dom-6", severity="warning", human="A resource should have narrative for robust management", expr="text.`div`.exists()", path="AllergyIntolerance")]
pub struct AllergyIntolerance {
    /// Logical id of this artifact
    /// 
    /// The logical id of the resource, as used in the URL for the resource. Once
    /// assigned, this value never changes.
    /// 
    /// ## Implementation Notes
    /// Within the context of the FHIR RESTful interactions, the resource has an id
    /// except for cases like the create and conditional update. Otherwise, the use
    /// of the resouce id depends on the given use case.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    pub id: Option<String>,
    /// Metadata about the resource
    /// 
    /// The metadata about the resource. This is content that is maintained by the
    /// infrastructure. Changes to the content might not always be associated with
    /// version changes to the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.meta")]
    pub meta: Option<Meta>,
    /// A set of rules under which this content was created
    /// 
    /// A reference to a set of rules that were followed when the resource was
    /// constructed, and which must be understood when processing the content. Often,
    /// this is a reference to an implementation guide that defines the special rules
    /// along with other profiles etc. For DomainResources, if more than one
    /// implicitRules policy applies, additional policies may be conveyed using the
    /// [additionalImplicitRules](https://build.fhir.org/ig/HL7/fhir-extensions/StructureDefinition-additionalImplicitRules.html)
    /// extension.
    /// 
    /// ## Implementation Notes
    /// Asserting this rule set restricts the content to be only understood by a
    /// limited set of trading partners. This inherently limits the usefulness of the
    /// data in the long term. However, the existing health eco-system is highly
    /// fractured, and not yet ready to define, collect, and exchange data in a
    /// generally computable sense. Wherever possible, implementers and/or
    /// specification writers should avoid using this element. Often, when used, the
    /// URL is a reference to an implementation guide that defines these special
    /// rules as part of its narrative along with other profiles, value sets, etc.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the implicit rules may provide additional knowledge about the resource that modifies its meaning or interpretation
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.implicitRules")]
    #[fhir_serde(rename = "implicitRules")]
    pub implicit_rules: Option<Uri>,
    /// Language of the resource content
    /// 
    /// The base language in which the resource is written.
    /// 
    /// ## Implementation Notes
    /// Language is provided to support indexing and accessibility (typically,
    /// services such as text to speech use the language tag). The html language tag
    /// in the narrative applies to the narrative. The language tag on the resource
    /// may be used to specify the language of other presentations generated from the
    /// data in the resource. Not all the content has to be in the base language. The
    /// Resource.language should not be assumed to apply to the narrative
    /// automatically. If a language is specified, it should it also be specified on
    /// the div element in the html (see rules in HTML5 for information about the
    /// relationship between xml:lang and the html lang attribute).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: IETF language tag for a human language
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/all-languages|6.0.0-ballot3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.language")]
    pub language: Option<Code>,
    /// Text summary of the resource, for human interpretation
    /// 
    /// A human-readable narrative that contains a summary of the resource and can be
    /// used to represent the content of the resource to a human. The narrative need
    /// not encode all the structured data, but is required to contain sufficient
    /// detail to make it "clinically safe" for a human to just read the narrative.
    /// Resource definitions may define what content should be represented in the
    /// narrative to ensure clinical safety.
    /// 
    /// ## Implementation Notes
    /// Contained resources do not have a narrative. Resources that are not contained
    /// SHOULD have a narrative. In some cases, a resource may only have text with
    /// little or no additional discrete data (as long as all minOccurs=1 elements
    /// are satisfied). This may be necessary for data from legacy systems where
    /// information is captured as a "text blob" or where text is additionally
    /// entered raw or narrated and encoded information is added later.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// narrative, html, xhtml, display
    /// 
    /// ## Conditions
    /// Used when: dom-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.text")]
    pub text: Option<Narrative>,
    /// Contained, inline Resources
    /// 
    /// These resources do not have an independent existence apart from the resource
    /// that contains them - they cannot be identified independently, nor can they
    /// have their own independent transaction scope. This is allowed to be a
    /// Parameters resource if and only if it is referenced by a resource that
    /// provides context/meaning.
    /// 
    /// ## Implementation Notes
    /// This should never be done when the content can be identified properly, as
    /// once identification is lost, it is extremely difficult (and context
    /// dependent) to restore it again. Contained resources may have profiles and
    /// tags in their meta elements, but SHALL NOT have security labels. Contained
    /// resources may be a resource type defined in the FHIR specification, or an
    /// [additional resource](resource.html#additional).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Aliases
    /// inline resources, anonymous resources, contained resources
    /// 
    /// ## Conditions
    /// Used when: dom-2, dom-4, dom-3, dom-5
    pub contained: Option<Vec<Resource>>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource and that modifies the understanding of the element
    /// that contains it and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer is allowed to define an extension, there is a set of requirements
    /// that SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the resource that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// External ids for this item
    /// 
    /// Business identifiers assigned to this AllergyIntolerance by the performer or
    /// other systems which remain constant as the resource is updated and propagates
    /// from server to server.
    /// 
    /// ## Requirements
    /// Allows identification of the AllergyIntolerance as it is known by various
    /// participating systems and in a way that remains consistent across servers.
    /// 
    /// ## Implementation Notes
    /// This is a business identifier, not a resource identifier (see
    /// [discussion](resource.html#identifiers)). It is best practice for the
    /// identifier to only appear on a single resource instance, however business
    /// practices may occasionally dictate that multiple resource instances with the
    /// same identifier can exist - possibly even with different resource types. For
    /// example, multiple Patient and a Person resource instance might share the same
    /// social insurance number.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.identifier")]
    pub identifier: Option<Vec<Identifier>>,
    /// active | inactive | resolved
    /// 
    /// The clinical status of the allergy or intolerance.
    /// 
    /// ## Implementation Notes
    /// AllergyIntolerance.clinicalStatus should be present if verificationStatus is
    /// not entered-in-error and the AllergyIntolerance.code isn't negated (No Known
    /// Allergy, No Drug Allergy, No Food Allergy, No Latex Allergy).
    /// Refer to [discussion](extensibility.html#Special-Case) if clinicalStatus is
    /// missing data.
    /// The data type is CodeableConcept because clinicalStatus has some clinical
    /// judgment involved, such that there might need to be more specificity than the
    /// required FHIR value set allows. For example, a SNOMED coding might allow for
    /// additional specificity.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the status contains the codes inactive and resolved that mark the AllergyIntolerance as no longer active.
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: The clinical status of the allergy or intolerance.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergyintolerance-clinical|6.0.0-ballot3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.clinicalStatus")]
    #[fhir_serde(rename = "clinicalStatus")]
    pub clinical_status: Option<CodeableConcept>,
    /// unconfirmed | presumed | confirmed | refuted | entered-in-error
    /// 
    /// Assertion about certainty associated with the propensity, or potential risk,
    /// of a reaction to the identified substance (including pharmaceutical product).
    /// The verification status pertains to the allergy or intolerance, itself, not
    /// to any specific AllergyIntolerance attribute.
    /// 
    /// ## Implementation Notes
    /// The data type is CodeableConcept because verificationStatus has some clinical
    /// judgment involved, such that there might need to be more specificity than the
    /// required FHIR value set allows. For example, a SNOMED coding might allow for
    /// additional specificity.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the status contains the codes refuted and entered-in-error that mark the AllergyIntolerance as not currently valid.
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Assertion about certainty associated with a propensity, or potential risk, of a reaction to the identified substance.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergyintolerance-verification|6.0.0-ballot3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.verificationStatus")]
    #[fhir_serde(rename = "verificationStatus")]
    pub verification_status: Option<CodeableConcept>,
    /// allergy | intolerance - Underlying mechanism (if known)
    /// 
    /// Identification of the underlying physiological mechanism for the reaction
    /// risk.
    /// 
    /// ## Implementation Notes
    /// Allergic (typically immune-mediated) reactions have been traditionally
    /// regarded as an indicator for potential escalation to significant future risk.
    /// Contemporary knowledge suggests that some reactions previously thought to be
    /// immune-mediated are, in fact, non-immune, but in some cases can still pose a
    /// life threatening risk. It is acknowledged that many clinicians might not be
    /// in a position to distinguish the mechanism of a particular reaction. Often
    /// the term "allergy" is used rather generically and may overlap with the use of
    /// "intolerance" - in practice the boundaries between these two concepts might
    /// not be well-defined or understood. This data element is included
    /// nevertheless, because many legacy systems have captured this attribute.
    /// Immunologic testing may provide supporting evidence for the basis of the
    /// reaction and the causative substance, but no tests are 100% sensitive or
    /// specific for sensitivity to a particular substance. If, as is commonly the
    /// case, it is unclear whether the reaction is due to an allergy or an
    /// intolerance, then the type element should be omitted from the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: preferred
    /// - **Description**: Identification of the underlying physiological mechanism for a Reaction Risk.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergy-intolerance-type
    /// 
    /// ## Aliases
    /// Category, Class
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.type")]
    #[fhir_serde(rename = "type")]
    pub r#type: Option<CodeableConcept>,
    /// food | medication | environment | biologic
    /// 
    /// Category of the identified substance.
    /// 
    /// ## Implementation Notes
    /// This data element has been included because it is currently being captured in
    /// some clinical systems. This data can be derived from the substance where
    /// coding systems are used, and is effectively redundant in that situation. When
    /// searching on category, consider the implications of AllergyIntolerance
    /// resources without a category. For example, when searching on category =
    /// medication, medication allergies that don't have a category valued will not
    /// be returned. Refer to [search](search.html) for more information on how to
    /// search category with a :missing modifier to get allergies that don't have a
    /// category. Additionally, category should be used with caution because category
    /// can be subjective based on the sender.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Category of an identified substance associated with allergies or intolerances.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergy-intolerance-category|6.0.0-ballot3
    /// 
    /// ## Aliases
    /// Category, Type, Reaction Type, Class
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.category")]
    pub category: Option<Vec<Code>>,
    /// low | high | unable-to-assess
    /// 
    /// Estimate of the potential clinical harm, or seriousness, of the reaction to
    /// the identified substance.
    /// 
    /// ## Implementation Notes
    /// The default criticality value for any propensity to an adverse reaction
    /// should be 'Low Risk', indicating at the very least a relative
    /// contraindication to deliberate or voluntary exposure to the substance. 'High
    /// Risk' is flagged if the clinician has identified a propensity for a more
    /// serious or potentially life-threatening reaction, such as anaphylaxis, and
    /// implies an absolute contraindication to deliberate or voluntary exposure to
    /// the substance. If this element is missing, the criticality is unknown (though
    /// it may be known elsewhere). Systems that capture a severity at the condition
    /// level are actually representing the concept of criticality whereas the
    /// severity documented at the reaction level is representing the true reaction
    /// severity. Existing systems that are capturing both condition criticality and
    /// reaction severity may use the term "severity" to represent both. Criticality
    /// is the worst it could be in the future (i.e. situation-agnostic) whereas
    /// severity is situation-dependent.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Estimate of the potential clinical harm, or seriousness, of a reaction to an identified substance.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergy-intolerance-criticality|6.0.0-ballot3
    /// 
    /// ## Aliases
    /// Severity, Seriousness, Contra-indication, Risk
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.criticality")]
    pub criticality: Option<Code>,
    /// Code that identifies the allergy or intolerance
    /// 
    /// Code for an allergy or intolerance statement (either a positive or a
    /// negated/excluded statement). This may be a code for a substance or
    /// pharmaceutical product that is considered to be responsible for the adverse
    /// reaction risk (e.g., "Latex"), an allergy or intolerance condition (e.g.,
    /// "Latex allergy"), or a negated/excluded code for a specific substance or
    /// class (e.g., "No latex allergy") or a general or categorical negated
    /// statement (e.g., "No known allergy", "No known drug allergies"). Note: the
    /// substance for a specific reaction may be different from the substance
    /// identified as the cause of the risk, but it must be consistent with it. For
    /// instance, it may be a more specific substance (e.g. a brand medication) or a
    /// composite product that includes the identified substance. It must be
    /// clinically safe to only process the 'code' and ignore the
    /// 'reaction.substance'. If a receiving system is unable to confirm that
    /// AllergyIntolerance.reaction.substance falls within the semantic scope of
    /// AllergyIntolerance.code, then the receiving system should ignore
    /// AllergyIntolerance.reaction.substance.
    /// 
    /// ## Implementation Notes
    /// It is strongly recommended that this element be populated using a
    /// terminology, where possible. For example, some terminologies used include
    /// RxNorm, SNOMED CT, DM+D, NDFRT, ICD-9, IDC-10, UNII, and ATC. Plain text
    /// should only be used if there is no appropriate terminology available.
    /// Additional details can be specified in the text.
    /// 
    /// When a substance or product code is specified for the 'code' element, the
    /// "default" semantic context is that this is a positive statement of an allergy
    /// or intolerance (depending on the value of the 'type' element, if present)
    /// condition to the specified substance/product. In the corresponding SNOMED CT
    /// allergy model, the specified substance/product is the target (destination) of
    /// the "Causative agent" relationship.
    /// 
    /// The 'substanceExposureRisk' extension is available as a structured and more
    /// flexible alternative to the 'code' element for making positive or negative
    /// allergy or intolerance statements. This extension provides the capability to
    /// make "no known allergy" (or "no risk of adverse reaction") statements
    /// regarding any coded substance/product (including cases when a pre-coordinated
    /// "no allergy to x" concept for that substance/product does not exist). If the
    /// 'substanceExposureRisk' extension is present, the AllergyIntolerance.code
    /// element SHALL be omitted.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Type of the substance/product, allergy or intolerance condition, or negation/exclusion codes for reporting no known allergies.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/allergyintolerance-code
    /// 
    /// ## Aliases
    /// Code
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.code")]
    pub code: Option<CodeableConcept>,
    /// Who the allergy or intolerance is for
    /// 
    /// The patient who has the allergy or intolerance.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Patient
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.patient")]
    pub patient: Reference,
    /// Encounter when the allergy or intolerance was asserted
    /// 
    /// The encounter when the allergy or intolerance was asserted.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.encounter")]
    pub encounter: Option<Reference>,
    /// When allergy or intolerance was identified
    /// 
    /// Estimated or actual date, date-time, or age when allergy or intolerance was
    /// identified.
    /// 
    /// ## Implementation Notes
    /// Age is generally used when the patient reports an age at which the
    /// AllergyIntolerance was noted. Period is generally used to convey an imprecise
    /// onset that occurred within the time period. Range is generally used to convey
    /// an imprecise age range (e.g. 4 to 6 years old).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.onset[x]")]
    #[fhir_serde(flatten)]
    pub onset: Option<AllergyIntoleranceOnset>,
    /// Date allergy or intolerance was first recorded
    /// 
    /// The recordedDate represents when this particular AllergyIntolerance record
    /// was created in the system, which is often a system-generated date.
    /// 
    /// ## Implementation Notes
    /// When onset date is unknown, recordedDate can be used to establish if the
    /// allergy or intolerance was present on or before a given date. If the
    /// recordedDate is known and provided by a sending system, it is preferred that
    /// the receiving system preserve that recordedDate value. If the recordedDate is
    /// not provided by the sending system, the receipt timestamp is sometimes used
    /// as the recordedDate.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.recordedDate")]
    #[fhir_serde(rename = "recordedDate")]
    pub recorded_date: Option<DateTime>,
    /// Who recorded the sensitivity
    /// 
    /// Individual who recorded the record and takes responsibility for accurately
    /// recording its content.
    /// 
    /// ## Implementation Notes
    /// Because the recorder takes responsibility for accurately recording
    /// information in the record, the recorder is the most recent author. The
    /// recorder might or might not be the asserter. By contrast, the recordedDate is
    /// when the allergy or intolerance was first recorded.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Author
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.recorder")]
    pub recorder: Option<Reference>,
    /// Source of the information about the allergy
    /// 
    /// The source of the information about the allergy that is recorded.
    /// 
    /// ## Implementation Notes
    /// The recorder takes responsibility for the content, but can reference the
    /// source from where they got it.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Source, Informant
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.asserter")]
    pub asserter: Option<Reference>,
    /// Date(/time) of last known occurrence of a reaction
    /// 
    /// Represents the date and/or time of the last known occurrence of a reaction
    /// event.
    /// 
    /// ## Implementation Notes
    /// This date may be replicated by one of the Onset of Reaction dates. Where a
    /// textual representation of the date of last occurrence is required e.g. 'In
    /// Childhood, '10 years ago' the AllergyIntolerance.note element should be used.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.lastReactionOccurrence")]
    #[fhir_serde(rename = "lastReactionOccurrence")]
    pub last_reaction_occurrence: Option<DateTime>,
    /// Additional text not captured in other fields
    /// 
    /// Additional narrative about the propensity for the Adverse Reaction, not
    /// captured in other fields.
    /// 
    /// ## Implementation Notes
    /// For example: including reason for flagging a seriousness of 'High Risk'; and
    /// instructions related to future exposure or administration of the substance,
    /// such as administration within an Intensive Care Unit or under corticosteroid
    /// cover. The notes should be related to an allergy or intolerance as a
    /// condition in general and not related to any particular episode of it. For
    /// episode notes and descriptions, use AllergyIntolerance.event.description and
    /// AllergyIntolerance.event.notes.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.note")]
    pub note: Option<Vec<Annotation>>,
    /// Adverse Reaction Events linked to exposure to substance
    /// 
    /// Details about each adverse reaction event linked to exposure to the
    /// identified substance.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children or both (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children or both", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction")]
    pub reaction: Option<Vec<AllergyIntoleranceReaction>>,
}

/// Adverse Reaction Events linked to exposure to substance
/// 
/// Details about each adverse reaction event linked to exposure to the
/// identified substance.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children or both (error)
///   Expression: `hasValue() or (children().count() > id.count())`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children or both", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction")]
pub struct AllergyIntoleranceReaction {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Conditions
    /// Used when: ele-1
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and managable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and managable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Specific substance or pharmaceutical product considered to be responsible for event
    /// 
    /// Identification of the specific substance (or pharmaceutical product)
    /// considered to be responsible for the Adverse Reaction event. Note: the
    /// substance for a specific reaction may be different from the substance
    /// identified as the cause of the risk, but it must be consistent with it. For
    /// instance, it may be a more specific substance (e.g. a brand medication) or a
    /// composite product that includes the identified substance. It must be
    /// clinically safe to only process the 'code' and ignore the
    /// 'reaction.substance'. If a receiving system is unable to confirm that
    /// AllergyIntolerance.reaction.substance falls within the semantic scope of
    /// AllergyIntolerance.code, then the receiving system should ignore
    /// AllergyIntolerance.reaction.substance.
    /// 
    /// ## Implementation Notes
    /// Coding of the specific substance (or pharmaceutical product) with a
    /// terminology capable of triggering decision support should be used wherever
    /// possible. The 'code' element allows for the use of a specific substance or
    /// pharmaceutical product, or a group or class of substances. In the case of an
    /// allergy or intolerance to a class of substances, (for example,
    /// "penicillins"), the 'reaction.substance' element could be used to code the
    /// specific substance that was identified as having caused the reaction (for
    /// example, "amoxycillin"). Duplication of the value in the 'code' and
    /// 'reaction.substance' elements is acceptable when a specific substance has
    /// been recorded in 'code'.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Codes defining the type of the substance (including pharmaceutical products).
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/substance-code
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.substance")]
    pub substance: Option<CodeableConcept>,
    /// Clinical symptoms/signs associated with the Event
    /// 
    /// Clinical symptoms and/or signs that are observed or associated with the
    /// adverse reaction event.
    /// 
    /// ## Implementation Notes
    /// Manifestation can be expressed as a single word, phrase or brief description.
    /// For example: nausea, rash or no reaction. It is preferable that manifestation
    /// should be coded with a terminology, where possible. The values entered here
    /// may be used to display on an application screen as part of a list of adverse
    /// reactions, as recommended in the UK NHS CUI guidelines. Terminologies
    /// commonly used include, but are not limited to, SNOMED CT or ICD10.
    /// 
    /// ## Cardinality: Required, Multiple (1..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Clinical symptoms and/or signs that are observed or associated with an Adverse Reaction Event.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/clinical-findings
    /// 
    /// ## Aliases
    /// Symptoms, Signs
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.manifestation")]
    pub manifestation: Option<Vec<CodeableReference>>,
    /// Description of the event as a whole
    /// 
    /// Text description about the reaction as a whole, including details of the
    /// manifestation if required.
    /// 
    /// ## Implementation Notes
    /// Use the description to provide any details of a particular event of the
    /// occurred reaction such as circumstances, reaction specifics, what happened
    /// before/after. Information, related to the event, but not describing a
    /// particular care should be captured in the note field. For example: at the age
    /// of four, the patient was given penicillin for strep throat and subsequently
    /// developed severe hives.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Narrative, Text
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.description")]
    pub description: Option<String>,
    /// Date(/time) when manifestations showed
    /// 
    /// Record of the date and/or time of the onset of the Reaction.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.onset")]
    pub onset: Option<DateTime>,
    /// mild | moderate | severe (of event as a whole)
    /// 
    /// Clinical assessment of the severity of the reaction event as a whole,
    /// potentially considering multiple different manifestations.
    /// 
    /// ## Implementation Notes
    /// It is acknowledged that this assessment is very subjective. There may be some
    /// specific practice domains where objective scales have been applied. Objective
    /// scales can be included in this model as extensions.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Clinical assessment of the severity of a reaction event as a whole, potentially considering multiple different manifestations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/reaction-event-severity|6.0.0-ballot3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.severity")]
    pub severity: Option<Code>,
    /// How the subject was exposed to the substance
    /// 
    /// Identification of the route by which the subject was exposed to the
    /// substance.
    /// 
    /// ## Implementation Notes
    /// Coding of the route of exposure with a terminology should be used wherever
    /// possible.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: A coded concept describing the route or physiological path of exposure to a substance.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/route-codes
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.exposureRoute")]
    #[fhir_serde(rename = "exposureRoute")]
    pub exposure_route: Option<CodeableConcept>,
    /// Text about event not captured in other fields
    /// 
    /// Additional text about the adverse reaction event not captured in other
    /// fields.
    /// 
    /// ## Implementation Notes
    /// Use this field to record information indirectly related to a particular event
    /// and not captured in the description. For example: Clinical records are no
    /// longer available, recorded based on information provided to the patient by
    /// her mother and her mother is deceased.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="AllergyIntolerance.reaction.note")]
    pub note: Option<Vec<Annotation>>,
}

