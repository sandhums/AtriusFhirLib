// AUTO-GENERATED by atrius-fhir-generator (R4 Observation)
use crate::r4::*;

/// Choice of types for the effective\[x\] field in Observation
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath)]
#[fhir_choice_element(base_name = "effective")]
pub enum ObservationEffective {
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "effectiveDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Period type.
    #[fhir_serde(rename = "effectivePeriod")]
    Period(Period),
    /// Variant accepting the Timing type.
    #[fhir_serde(rename = "effectiveTiming")]
    Timing(Timing),
    /// Variant accepting the Instant type.
    #[fhir_serde(rename = "effectiveInstant")]
    Instant(Instant),
}

/// Choice of types for the value\[x\] field in Observation
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath)]
#[fhir_choice_element(base_name = "value")]
pub enum ObservationValue {
    /// Variant accepting the Quantity type.
    #[fhir_serde(rename = "valueQuantity")]
    Quantity(Quantity),
    /// Variant accepting the CodeableConcept type.
    #[fhir_serde(rename = "valueCodeableConcept")]
    CodeableConcept(CodeableConcept),
    /// Variant accepting the String type.
    #[fhir_serde(rename = "valueString")]
    String(String),
    /// Variant accepting the Boolean type.
    #[fhir_serde(rename = "valueBoolean")]
    Boolean(Boolean),
    /// Variant accepting the Integer type.
    #[fhir_serde(rename = "valueInteger")]
    Integer(Integer),
    /// Variant accepting the Range type.
    #[fhir_serde(rename = "valueRange")]
    Range(Range),
    /// Variant accepting the Ratio type.
    #[fhir_serde(rename = "valueRatio")]
    Ratio(Ratio),
    /// Variant accepting the SampledData type.
    #[fhir_serde(rename = "valueSampledData")]
    SampledData(SampledData),
    /// Variant accepting the Time type.
    #[fhir_serde(rename = "valueTime")]
    Time(Time),
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "valueDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Period type.
    #[fhir_serde(rename = "valuePeriod")]
    Period(Period),
}

/// FHIR Observation type
/// 
/// Measurements and simple assertions made about a patient, device or other
/// subject.
/// 
/// ## Purpose
/// Observations are a key aspect of healthcare.  This resource is used to capture those that do not require more sophisticated mechanisms.
/// 
/// ## Type: Resource type
/// Base type: http://hl7.org/fhir/StructureDefinition/DomainResource
/// 
/// ## Status: active
/// FHIR Version: 4.0.1
/// 
/// See: [Observation](http://hl7.org/fhir/StructureDefinition/Observation)
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "effective,value")]
#[fhir_invariant(key="dom-2", severity="error", human="If the resource is contained in another resource, it SHALL NOT contain nested Resources", expr="contained.contained.empty()", path="Observation")]
#[fhir_invariant(key="dom-3", severity="error", human="If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource", expr="contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()", path="Observation")]
#[fhir_invariant(key="dom-4", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated", expr="contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()", path="Observation")]
#[fhir_invariant(key="dom-5", severity="error", human="If a resource is contained in another resource, it SHALL NOT have a security label", expr="contained.meta.security.empty()", path="Observation")]
#[fhir_invariant(key="dom-6", severity="warning", human="A resource should have narrative for robust management", expr="text.`div`.exists()", path="Observation")]
#[fhir_invariant(key="obs-6", severity="error", human="dataAbsentReason SHALL only be present if Observation.value[x] is not present", expr="dataAbsentReason.empty() or value.empty()", path="Observation")]
#[fhir_invariant(key="obs-7", severity="error", human="If Observation.code is the same as an Observation.component.code then the value element associated with the code SHALL NOT be present", expr="value.empty() or component.code.where(coding.intersect(%resource.code.coding).exists()).empty()", path="Observation")]
pub struct Observation {
    /// Logical id of this artifact
    /// 
    /// The logical id of the resource, as used in the URL for the resource. Once
    /// assigned, this value never changes.
    /// 
    /// ## Implementation Notes
    /// The only time that a resource does not have an id is when it is being
    /// submitted to the server using a create operation.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    pub id: Option<String>,
    /// Metadata about the resource
    /// 
    /// The metadata about the resource. This is content that is maintained by the
    /// infrastructure. Changes to the content might not always be associated with
    /// version changes to the resource.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.meta")]
    pub meta: Option<Meta>,
    /// A set of rules under which this content was created
    /// 
    /// A reference to a set of rules that were followed when the resource was
    /// constructed, and which must be understood when processing the content. Often,
    /// this is a reference to an implementation guide that defines the special rules
    /// along with other profiles etc.
    /// 
    /// ## Implementation Notes
    /// Asserting this rule set restricts the content to be only understood by a
    /// limited set of trading partners. This inherently limits the usefulness of the
    /// data in the long term. However, the existing health eco-system is highly
    /// fractured, and not yet ready to define, collect, and exchange data in a
    /// generally computable sense. Wherever possible, implementers and/or
    /// specification writers should avoid using this element. Often, when used, the
    /// URL is a reference to an implementation guide that defines these special
    /// rules as part of it's narrative along with other profiles, value sets, etc.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because the implicit rules may provide additional knowledge about the resource that modifies it's meaning or interpretation
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.implicitRules")]
    #[fhir_serde(rename = "implicitRules")]
    pub implicit_rules: Option<Uri>,
    /// Language of the resource content
    /// 
    /// The base language in which the resource is written.
    /// 
    /// ## Implementation Notes
    /// Language is provided to support indexing and accessibility (typically,
    /// services such as text to speech use the language tag). The html language tag
    /// in the narrative applies to the narrative. The language tag on the resource
    /// may be used to specify the language of other presentations generated from the
    /// data in the resource. Not all the content has to be in the base language. The
    /// Resource.language should not be assumed to apply to the narrative
    /// automatically. If a language is specified, it should it also be specified on
    /// the div element in the html (see rules in HTML5 for information about the
    /// relationship between xml:lang and the html lang attribute).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: preferred
    /// - **Description**: A human language.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/languages
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.language")]
    pub language: Option<Code>,
    /// Text summary of the resource, for human interpretation
    /// 
    /// A human-readable narrative that contains a summary of the resource and can be
    /// used to represent the content of the resource to a human. The narrative need
    /// not encode all the structured data, but is required to contain sufficient
    /// detail to make it "clinically safe" for a human to just read the narrative.
    /// Resource definitions may define what content should be represented in the
    /// narrative to ensure clinical safety.
    /// 
    /// ## Implementation Notes
    /// Contained resources do not have narrative. Resources that are not contained
    /// SHOULD have a narrative. In some cases, a resource may only have text with
    /// little or no additional discrete data (as long as all minOccurs=1 elements
    /// are satisfied). This may be necessary for data from legacy systems where
    /// information is captured as a "text blob" or where text is additionally
    /// entered raw or narrated and encoded information is added later.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// narrative, html, xhtml, display
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.text")]
    pub text: Option<Narrative>,
    /// Contained, inline Resources
    /// 
    /// These resources do not have an independent existence apart from the resource
    /// that contains them - they cannot be identified independently, and nor can
    /// they have their own independent transaction scope.
    /// 
    /// ## Implementation Notes
    /// This should never be done when the content can be identified properly, as
    /// once identification is lost, it is extremely difficult (and context
    /// dependent) to restore it again. Contained resources may have profiles and
    /// tags In their meta elements, but SHALL NOT have security labels.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Aliases
    /// inline resources, anonymous resources, contained resources
    pub contained: Option<Vec<Resource>>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource. To make the use of extensions safe and
    /// manageable, there is a strict set of governance applied to the definition and
    /// use of extensions. Though any implementer can define an extension, there is a
    /// set of requirements that SHALL be met as part of the definition of the
    /// extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the resource and that modifies the understanding of the element
    /// that contains it and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and manageable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer is allowed to define an extension, there is a set of requirements
    /// that SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the resource that contains them
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Business Identifier for observation
    /// 
    /// A unique identifier assigned to this observation.
    /// 
    /// ## Requirements
    /// Allows observations to be distinguished and referenced.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.identifier")]
    pub identifier: Option<Vec<Identifier>>,
    /// Fulfills plan, proposal or order
    /// 
    /// A plan, proposal or order that is fulfilled in whole or in part by this
    /// event. For example, a MedicationRequest may require a patient to have
    /// laboratory test performed before it is dispensed.
    /// 
    /// ## Requirements
    /// Allows tracing of authorization for the event and tracking whether
    /// proposals/recommendations were acted upon.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Fulfills
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.basedOn")]
    #[fhir_serde(rename = "basedOn")]
    pub based_on: Option<Vec<Reference>>,
    /// Part of referenced event
    /// 
    /// A larger event of which this particular Observation is a component or step.
    /// For example, an observation as part of a procedure.
    /// 
    /// ## Implementation Notes
    /// To link an Observation to an Encounter use `encounter`. See the
    /// [Notes](observation.html#obsgrouping) below for guidance on referencing
    /// another Observation.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Container
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.partOf")]
    #[fhir_serde(rename = "partOf")]
    pub part_of: Option<Vec<Reference>>,
    /// registered | preliminary | final | amended +
    /// 
    /// The status of the result value.
    /// 
    /// ## Requirements
    /// Need to track the status of individual results. Some results are finalized
    /// before the whole report is finalized.
    /// 
    /// ## Implementation Notes
    /// This element is labeled as a modifier because the status contains codes that
    /// mark the resource as not currently valid.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Modifier element - This element is labeled as a modifier because it is a status element that contains status entered-in-error which means that the resource should not be treated as valid
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: required
    /// - **Description**: Codes providing the status of an observation.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-status|4.0.1
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.status")]
    pub status: Code,
    /// Classification of  type of observation
    /// 
    /// A code that classifies the general type of observation being made.
    /// 
    /// ## Requirements
    /// Used for filtering what observations are retrieved and displayed.
    /// 
    /// ## Implementation Notes
    /// In addition to the required category valueset, this element allows various
    /// categorization schemes based on the owner’s definition of the category and
    /// effectively multiple categories can be used at once. The level of granularity
    /// is defined by the category concepts in the value set.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: preferred
    /// - **Description**: Codes for high level observation categories.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-category
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.category")]
    pub category: Option<Vec<CodeableConcept>>,
    /// Type of observation (code / type)
    /// 
    /// Describes what was observed. Sometimes this is called the observation "name".
    /// 
    /// ## Requirements
    /// Knowing what kind of observation is being made is essential to understanding
    /// the observation.
    /// 
    /// ## Implementation Notes
    /// *All* code-value and, if present, component.code-component.value pairs need
    /// to be taken into account to correctly understand the meaning of the
    /// observation.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Codes identifying names of simple observations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-codes
    /// 
    /// ## Aliases
    /// Name
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.code")]
    pub code: CodeableConcept,
    /// Who and/or what the observation is about
    /// 
    /// The patient, or group of patients, location, or device this observation is
    /// about and into whose record the observation is placed. If the actual focus of
    /// the observation is different from the subject (or a sample of, part, or
    /// region of the subject), the `focus` element or the `code` itself specifies
    /// the actual focus of the observation.
    /// 
    /// ## Requirements
    /// Observations have no value if you don't know who or what they're about.
    /// 
    /// ## Implementation Notes
    /// One would expect this element to be a cardinality of 1..1. The only
    /// circumstance in which the subject can be missing is when the observation is
    /// made by a device that does not know the patient. In this case, the
    /// observation SHALL be matched to a patient through some context/channel
    /// matching technique, and at this point, the observation should be updated.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.subject")]
    pub subject: Option<Reference>,
    /// What the observation is about, when it is not about the subject of record
    /// 
    /// The actual focus of an observation when it is not the patient of record
    /// representing something or someone associated with the patient such as a
    /// spouse, parent, fetus, or donor. For example, fetus observations in a
    /// mother's record. The focus of an observation could also be an existing
    /// condition, an intervention, the subject's diet, another observation of the
    /// subject, or a body structure such as tumor or implanted device. An example
    /// use case would be using the Observation resource to capture whether the
    /// mother is trained to change her child's tracheostomy tube. In this example,
    /// the child is the patient of record and the mother is the focus.
    /// 
    /// ## Implementation Notes
    /// Typically, an observation is made about the subject - a patient, or group of
    /// patients, location, or device - and the distinction between the subject and
    /// what is directly measured for an observation is specified in the observation
    /// code itself ( e.g., "Blood Glucose") and does not need to be represented
    /// separately using this element. Use `specimen` if a reference to a specimen is
    /// required. If a code is required instead of a resource use either `bodysite`
    /// for bodysites or the standard extension
    /// [focusCode](extension-observation-focuscode.html).
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.focus")]
    pub focus: Option<Vec<Reference>>,
    /// Healthcare event during which this observation is made
    /// 
    /// The healthcare event (e.g. a patient and healthcare provider interaction)
    /// during which this observation is made.
    /// 
    /// ## Requirements
    /// For some observations it may be important to know the link between an
    /// observation and a particular encounter.
    /// 
    /// ## Implementation Notes
    /// This will typically be the encounter the event occurred within, but some
    /// events may be initiated prior to or after the official completion of an
    /// encounter but still be tied to the context of the encounter (e.g.
    /// pre-admission laboratory tests).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Context
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.encounter")]
    pub encounter: Option<Reference>,
    /// Clinically relevant time/time-period for observation
    /// 
    /// The time or time-period the observed value is asserted as being true. For
    /// biological subjects - e.g. human patients - this is usually called the
    /// "physiologically relevant time". This is usually either the time of the
    /// procedure or of specimen collection, but very often the source of the
    /// date/time is not known, only the date/time itself.
    /// 
    /// ## Requirements
    /// Knowing when an observation was deemed true is important to its relevance as
    /// well as determining trends.
    /// 
    /// ## Implementation Notes
    /// At least a date should be present unless this observation is a historical
    /// report. For recording imprecise or "fuzzy" times (For example, a blood
    /// glucose measurement taken "after breakfast") use the
    /// [Timing](datatypes.html#timing) datatype which allow the measurement to be
    /// tied to regular life events.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Aliases
    /// Occurrence
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.effective[x]")]
    #[fhir_serde(flatten)]
    pub effective: Option<ObservationEffective>,
    /// Date/Time this version was made available
    /// 
    /// The date and time this version of the observation was made available to
    /// providers, typically after the results have been reviewed and verified.
    /// 
    /// ## Implementation Notes
    /// For Observations that don’t require review and verification, it may be the
    /// same as the [`lastUpdated` ](resource-definitions.html#Meta.lastUpdated) time
    /// of the resource itself. For Observations that do require review and
    /// verification for certain updates, it might not be the same as the
    /// `lastUpdated` time of the resource itself due to a non-clinically significant
    /// update that doesn’t require the new version to be reviewed and verified
    /// again.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.issued")]
    pub issued: Option<Instant>,
    /// Who is responsible for the observation
    /// 
    /// Who was responsible for asserting the observed value as "true".
    /// 
    /// ## Requirements
    /// May give a degree of confidence in the observation and also indicates where
    /// follow-up questions should be directed.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.performer")]
    pub performer: Option<Vec<Reference>>,
    /// Actual result
    /// 
    /// The information determined as a result of making the observation, if the
    /// information has a simple value.
    /// 
    /// ## Requirements
    /// An observation exists to have a value, though it might not if it is in error,
    /// or if it represents a group of observations.
    /// 
    /// ## Implementation Notes
    /// An observation may have; 1) a single value here, 2) both a value and a set of
    /// related or component values, or 3) only a set of related or component values.
    /// If a value is present, the datatype for this element should be determined by
    /// Observation.code. A CodeableConcept with just a text would be used instead of
    /// a string if the field was usually coded, or if the type associated with the
    /// Observation.code defines a coded value. For additional guidance, see the
    /// [Notes section](observation.html#notes) below.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: obs-7
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.value[x]")]
    #[fhir_serde(flatten)]
    pub value: Option<ObservationValue>,
    /// Why the result is missing
    /// 
    /// Provides a reason why the expected value in the element Observation.value[x]
    /// is missing.
    /// 
    /// ## Requirements
    /// For many results it is necessary to handle exceptional values in
    /// measurements.
    /// 
    /// ## Implementation Notes
    /// Null or exceptional values can be represented two ways in FHIR Observations.
    /// One way is to simply include them in the value set and represent the
    /// exceptions in the value. For example, measurement values for a serology test
    /// could be "detected", "not detected", "inconclusive", or "specimen
    /// unsatisfactory".
    /// 
    /// The alternate way is to use the value element for actual observations and use
    /// the explicit dataAbsentReason element to record exceptional values. For
    /// example, the dataAbsentReason code "error" could be used when the measurement
    /// was not completed. Note that an observation may only be reported if there are
    /// values to report. For example differential cell counts values may be reported
    /// only when > 0. Because of these options, use-case agreements are required to
    /// interpret general observations for null or exceptional values.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Codes specifying why the result (`Observation.value[x]`) is missing.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/data-absent-reason
    /// 
    /// ## Conditions
    /// Used when: obs-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.dataAbsentReason")]
    #[fhir_serde(rename = "dataAbsentReason")]
    pub data_absent_reason: Option<CodeableConcept>,
    /// High, low, normal, etc.
    /// 
    /// A categorical assessment of an observation value. For example, high, low,
    /// normal.
    /// 
    /// ## Requirements
    /// For some results, particularly numeric results, an interpretation is
    /// necessary to fully understand the significance of a result.
    /// 
    /// ## Implementation Notes
    /// Historically used for laboratory results (known as 'abnormal flag' ), its use
    /// extends to other use cases where coded interpretations are relevant. Often
    /// reported as one or more simple compact codes this element is often placed
    /// adjacent to the result value in reports and flow sheets to signal the
    /// meaning/normalcy status of the result.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Codes identifying interpretations of observations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-interpretation
    /// 
    /// ## Aliases
    /// Abnormal Flag
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.interpretation")]
    pub interpretation: Option<Vec<CodeableConcept>>,
    /// Comments about the observation
    /// 
    /// Comments about the observation or the results.
    /// 
    /// ## Requirements
    /// Need to be able to provide free text additional information.
    /// 
    /// ## Implementation Notes
    /// May include general statements about the observation, or statements about
    /// significant, unexpected or unreliable results values, or information about
    /// its source when relevant to its interpretation.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.note")]
    pub note: Option<Vec<Annotation>>,
    /// Observed body part
    /// 
    /// Indicates the site on the subject's body where the observation was made (i.e.
    /// the target site).
    /// 
    /// ## Implementation Notes
    /// Only used if not implicit in code found in Observation.code. In many systems,
    /// this may be represented as a related observation instead of an inline
    /// component.
    /// 
    /// If the use case requires BodySite to be handled as a separate resource (e.g.
    /// to identify and track separately) then use the standard extension[
    /// bodySite](extension-bodysite.html).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Codes describing anatomical locations. May include laterality.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/body-site
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.bodySite")]
    #[fhir_serde(rename = "bodySite")]
    pub body_site: Option<CodeableConcept>,
    /// How it was done
    /// 
    /// Indicates the mechanism used to perform the observation.
    /// 
    /// ## Requirements
    /// In some cases, method can impact results and is thus used for determining
    /// whether results can be compared or determining significance of results.
    /// 
    /// ## Implementation Notes
    /// Only used if not implicit in code for Observation.code.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Methods for simple observations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-methods
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.method")]
    pub method: Option<CodeableConcept>,
    /// Specimen used for this observation
    /// 
    /// The specimen that was used when this observation was made.
    /// 
    /// ## Implementation Notes
    /// Should only be used if not implicit in code found in `Observation.code`.
    /// Observations are not made on specimens themselves; they are made on a
    /// subject, but in many cases by the means of a specimen. Note that although
    /// specimens are often involved, they are not always tracked and reported
    /// explicitly. Also note that observation resources may be used in contexts that
    /// track the specimen explicitly (e.g. Diagnostic Report).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.specimen")]
    pub specimen: Option<Reference>,
    /// (Measurement) Device
    /// 
    /// The device used to generate the observation data.
    /// 
    /// ## Implementation Notes
    /// Note that this is not meant to represent a device involved in the
    /// transmission of the result, e.g., a gateway. Such devices may be documented
    /// using the Provenance resource where relevant.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.device")]
    pub device: Option<Reference>,
    /// Provides guide for interpretation
    /// 
    /// Guidance on how to interpret the value by comparison to a normal or
    /// recommended range. Multiple reference ranges are interpreted as an "OR". In
    /// other words, to represent two distinct target populations, two
    /// `referenceRange` elements would be used.
    /// 
    /// ## Requirements
    /// Knowing what values are considered "normal" can help evaluate the
    /// significance of a particular result. Need to be able to provide multiple
    /// reference ranges for different contexts.
    /// 
    /// ## Implementation Notes
    /// Most observations only have one generic reference range. Systems MAY choose
    /// to restrict to only supplying the relevant reference range based on knowledge
    /// about the patient (e.g., specific to the patient's age, gender, weight and
    /// other factors), but this might not be possible or appropriate. Whenever more
    /// than one reference range is supplied, the differences between them SHOULD be
    /// provided in the reference range and/or age properties.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **obs-3**: Must have at least a low or a high or text (error)
    ///   Expression: `low.exists() or high.exists() or text.exists()`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange")]
    #[fhir_invariant(key="obs-3", severity="error", human="Must have at least a low or a high or text", expr="low.exists() or high.exists() or text.exists()", path="Observation.referenceRange")]
    #[fhir_serde(rename = "referenceRange")]
    pub reference_range: Option<Vec<ObservationReferenceRange>>,
    /// Related resource that belongs to the Observation group
    /// 
    /// This observation is a group observation (e.g. a battery, a panel of tests, a
    /// set of vital sign measurements) that includes the target as a member of the
    /// group.
    /// 
    /// ## Implementation Notes
    /// When using this element, an observation will typically have either a value or
    /// a set of related resources, although both may be present in some cases. For a
    /// discussion on the ways Observations can assembled in groups together, see
    /// [Notes](observation.html#obsgrouping) below. Note that a system may calculate
    /// results from [QuestionnaireResponse](questionnaireresponse.html) into a final
    /// score and represent the score as an Observation.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.hasMember")]
    #[fhir_serde(rename = "hasMember")]
    pub has_member: Option<Vec<Reference>>,
    /// Related measurements the observation is made from
    /// 
    /// The target resource that represents a measurement from which this observation
    /// value is derived. For example, a calculated anion gap or a fetal measurement
    /// based on an ultrasound image.
    /// 
    /// ## Implementation Notes
    /// All the reference choices that are listed in this element can represent
    /// clinical observations and other measurements that may be the source for a
    /// derived value. The most common reference will be another Observation. For a
    /// discussion on the ways Observations can assembled in groups together, see
    /// [Notes](observation.html#obsgrouping) below.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.derivedFrom")]
    #[fhir_serde(rename = "derivedFrom")]
    pub derived_from: Option<Vec<Reference>>,
    /// Component results
    /// 
    /// Some observations have multiple component observations. These component
    /// observations are expressed as separate code value pairs that share the same
    /// attributes. Examples include systolic and diastolic component observations
    /// for blood pressure measurement and multiple component observations for
    /// genetics observations.
    /// 
    /// ## Requirements
    /// Component observations share the same attributes in the Observation resource
    /// as the primary observation and are always treated a part of a single
    /// observation (they are not separable). However, the reference range for the
    /// primary observation value is not inherited by the component values and is
    /// required when appropriate for each component observation.
    /// 
    /// ## Implementation Notes
    /// For a discussion on the ways Observations can be assembled in groups together
    /// see [Notes](observation.html#notes) below.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component")]
    pub component: Option<Vec<ObservationComponent>>,
}

/// Choice of types for the value\[x\] field in ObservationComponent
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath)]
#[fhir_choice_element(base_name = "value")]
pub enum ObservationComponentValue {
    /// Variant accepting the Quantity type.
    #[fhir_serde(rename = "valueQuantity")]
    Quantity(Quantity),
    /// Variant accepting the CodeableConcept type.
    #[fhir_serde(rename = "valueCodeableConcept")]
    CodeableConcept(CodeableConcept),
    /// Variant accepting the String type.
    #[fhir_serde(rename = "valueString")]
    String(String),
    /// Variant accepting the Boolean type.
    #[fhir_serde(rename = "valueBoolean")]
    Boolean(Boolean),
    /// Variant accepting the Integer type.
    #[fhir_serde(rename = "valueInteger")]
    Integer(Integer),
    /// Variant accepting the Range type.
    #[fhir_serde(rename = "valueRange")]
    Range(Range),
    /// Variant accepting the Ratio type.
    #[fhir_serde(rename = "valueRatio")]
    Ratio(Ratio),
    /// Variant accepting the SampledData type.
    #[fhir_serde(rename = "valueSampledData")]
    SampledData(SampledData),
    /// Variant accepting the Time type.
    #[fhir_serde(rename = "valueTime")]
    Time(Time),
    /// Variant accepting the DateTime type.
    #[fhir_serde(rename = "valueDateTime")]
    DateTime(DateTime),
    /// Variant accepting the Period type.
    #[fhir_serde(rename = "valuePeriod")]
    Period(Period),
}

/// Component results
/// 
/// Some observations have multiple component observations. These component
/// observations are expressed as separate code value pairs that share the same
/// attributes. Examples include systolic and diastolic component observations
/// for blood pressure measurement and multiple component observations for
/// genetics observations.
/// 
/// ## Requirements
/// Component observations share the same attributes in the Observation resource
/// as the primary observation and are always treated a part of a single
/// observation (they are not separable). However, the reference range for the
/// primary observation value is not inherited by the component values and is
/// required when appropriate for each component observation.
/// 
/// ## Implementation Notes
/// For a discussion on the ways Observations can be assembled in groups together
/// see [Notes](observation.html#notes) below.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Special Semantics
/// - Included in summary
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_resource(choice_elements = "value")]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component")]
pub struct ObservationComponent {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and manageable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.component.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and manageable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.component.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Type of component observation (code / type)
    /// 
    /// Describes what was observed. Sometimes this is called the observation "code".
    /// 
    /// ## Requirements
    /// Knowing what kind of observation is being made is essential to understanding
    /// the observation.
    /// 
    /// ## Implementation Notes
    /// *All* code-value and component.code-component.value pairs need to be taken
    /// into account to correctly understand the meaning of the observation.
    /// 
    /// ## Cardinality: Required (1..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Codes identifying names of simple observations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-codes
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.code")]
    pub code: CodeableConcept,
    /// Actual component result
    /// 
    /// The information determined as a result of making the observation, if the
    /// information has a simple value.
    /// 
    /// ## Requirements
    /// An observation exists to have a value, though it might not if it is in error,
    /// or if it represents a group of observations.
    /// 
    /// ## Implementation Notes
    /// Used when observation has a set of component observations. An observation may
    /// have both a value (e.g. an Apgar score) and component observations (the
    /// observations from which the Apgar score was derived). If a value is present,
    /// the datatype for this element should be determined by Observation.code. A
    /// CodeableConcept with just a text would be used instead of a string if the
    /// field was usually coded, or if the type associated with the Observation.code
    /// defines a coded value. For additional guidance, see the [Notes
    /// section](observation.html#notes) below.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Special Semantics
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.value[x]")]
    #[fhir_serde(flatten)]
    pub value: Option<ObservationComponentValue>,
    /// Why the component result is missing
    /// 
    /// Provides a reason why the expected value in the element
    /// Observation.component.value[x] is missing.
    /// 
    /// ## Requirements
    /// For many results it is necessary to handle exceptional values in
    /// measurements.
    /// 
    /// ## Implementation Notes
    /// "Null" or exceptional values can be represented two ways in FHIR
    /// Observations. One way is to simply include them in the value set and
    /// represent the exceptions in the value. For example, measurement values for a
    /// serology test could be "detected", "not detected", "inconclusive", or "test
    /// not done".
    /// 
    /// The alternate way is to use the value element for actual observations and use
    /// the explicit dataAbsentReason element to record exceptional values. For
    /// example, the dataAbsentReason code "error" could be used when the measurement
    /// was not completed. Because of these options, use-case agreements are required
    /// to interpret general observations for exceptional values.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Codes specifying why the result (`Observation.value[x]`) is missing.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/data-absent-reason
    /// 
    /// ## Conditions
    /// Used when: obs-6
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.dataAbsentReason")]
    #[fhir_serde(rename = "dataAbsentReason")]
    pub data_absent_reason: Option<CodeableConcept>,
    /// High, low, normal, etc.
    /// 
    /// A categorical assessment of an observation value. For example, high, low,
    /// normal.
    /// 
    /// ## Requirements
    /// For some results, particularly numeric results, an interpretation is
    /// necessary to fully understand the significance of a result.
    /// 
    /// ## Implementation Notes
    /// Historically used for laboratory results (known as 'abnormal flag' ), its use
    /// extends to other use cases where coded interpretations are relevant. Often
    /// reported as one or more simple compact codes this element is often placed
    /// adjacent to the result value in reports and flow sheets to signal the
    /// meaning/normalcy status of the result.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: extensible
    /// - **Description**: Codes identifying interpretations of observations.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/observation-interpretation
    /// 
    /// ## Aliases
    /// Abnormal Flag
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.interpretation")]
    pub interpretation: Option<Vec<CodeableConcept>>,
    /// Provides guide for interpretation of component result
    /// 
    /// Guidance on how to interpret the value by comparison to a normal or
    /// recommended range.
    /// 
    /// ## Requirements
    /// Knowing what values are considered "normal" can help evaluate the
    /// significance of a particular result. Need to be able to provide multiple
    /// reference ranges for different contexts.
    /// 
    /// ## Implementation Notes
    /// Most observations only have one generic reference range. Systems MAY choose
    /// to restrict to only supplying the relevant reference range based on knowledge
    /// about the patient (e.g., specific to the patient's age, gender, weight and
    /// other factors), but this might not be possible or appropriate. Whenever more
    /// than one reference range is supplied, the differences between them SHOULD be
    /// provided in the reference range and/or age properties.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.component.referenceRange")]
    #[fhir_serde(rename = "referenceRange")]
    pub reference_range: Option<Vec<ObservationReferenceRange>>,
}

/// Provides guide for interpretation
/// 
/// Guidance on how to interpret the value by comparison to a normal or
/// recommended range. Multiple reference ranges are interpreted as an "OR". In
/// other words, to represent two distinct target populations, two
/// `referenceRange` elements would be used.
/// 
/// ## Requirements
/// Knowing what values are considered "normal" can help evaluate the
/// significance of a particular result. Need to be able to provide multiple
/// reference ranges for different contexts.
/// 
/// ## Implementation Notes
/// Most observations only have one generic reference range. Systems MAY choose
/// to restrict to only supplying the relevant reference range based on knowledge
/// about the patient (e.g., specific to the patient's age, gender, weight and
/// other factors), but this might not be possible or appropriate. Whenever more
/// than one reference range is supplied, the differences between them SHOULD be
/// provided in the reference range and/or age properties.
/// 
/// ## Cardinality: Optional, Multiple (0..*)
/// 
/// ## Constraints
/// - **ele-1**: All FHIR elements must have a @value or children (error)
///   Expression: `hasValue() or (children().count() > id.count())`
/// - **obs-3**: Must have at least a low or a high or text (error)
///   Expression: `low.exists() or high.exists() or text.exists()`
#[derive(Debug, Clone, PartialEq, FhirSerde, FhirPath, Default, FhirValidate)]
#[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange")]
#[fhir_invariant(key="obs-3", severity="error", human="Must have at least a low or a high or text", expr="low.exists() or high.exists() or text.exists()", path="Observation.referenceRange")]
pub struct ObservationReferenceRange {
    /// Unique id for inter-element referencing
    /// 
    /// Unique id for the element within a resource (for internal references). This
    /// may be any string value that does not contain spaces.
    /// 
    /// ## Cardinality: Optional (0..1)
    pub id: Option<String>,
    /// Additional content defined by implementations
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element. To make the use of extensions safe and manageable,
    /// there is a strict set of governance applied to the definition and use of
    /// extensions. Though any implementer can define an extension, there is a set of
    /// requirements that SHALL be met as part of the definition of the extension.
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.extension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.referenceRange.extension")]
    pub extension: Option<Vec<Extension>>,
    /// Extensions that cannot be ignored even if unrecognized
    /// 
    /// May be used to represent additional information that is not part of the basic
    /// definition of the element and that modifies the understanding of the element
    /// in which it is contained and/or the understanding of the containing element's
    /// descendants. Usually modifier elements provide negation or qualification. To
    /// make the use of extensions safe and manageable, there is a strict set of
    /// governance applied to the definition and use of extensions. Though any
    /// implementer can define an extension, there is a set of requirements that
    /// SHALL be met as part of the definition of the extension. Applications
    /// processing a resource are required to check for modifier extensions.
    /// 
    /// Modifier extensions SHALL NOT change the meaning of any elements on Resource
    /// or DomainResource (including cannot change the meaning of modifierExtension
    /// itself).
    /// 
    /// ## Requirements
    /// Modifier extensions allow for extensions that *cannot* be safely ignored to
    /// be clearly distinguished from the vast majority of extensions which can be
    /// safely ignored. This promotes interoperability by eliminating the need for
    /// implementers to prohibit the presence of extensions. For further information,
    /// see the [definition of modifier
    /// extensions](extensibility.html#modifierExtension).
    /// 
    /// ## Implementation Notes
    /// There can be no stigma associated with the use of extensions by any
    /// application, project, or standard - regardless of the institution or
    /// jurisdiction that uses or defines the extensions. The use of extensions is
    /// what allows the FHIR specification to retain a core level of simplicity for
    /// everyone.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Special Semantics
    /// - Modifier element - Modifier extensions are expected to modify the meaning or interpretation of the element that contains them
    /// - Included in summary
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// - **ext-1**: Must have either extensions or value[x], not both (error)
    ///   Expression: `extension.exists() != value.exists()`
    /// 
    /// ## Aliases
    /// extensions, user content, modifiers
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.modifierExtension")]
    #[fhir_invariant(key="ext-1", severity="error", human="Must have either extensions or value[x], not both", expr="extension.exists() != value.exists()", path="Observation.referenceRange.modifierExtension")]
    #[fhir_serde(rename = "modifierExtension")]
    pub modifier_extension: Option<Vec<Extension>>,
    /// Low Range, if relevant
    /// 
    /// The value of the low bound of the reference range. The low bound of the
    /// reference range endpoint is inclusive of the value (e.g. reference range is
    /// \>=5 - \<=9). If the low bound is omitted, it is assumed to be meaningless
    /// (e.g. reference range is \<=2.3).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: obs-3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.low")]
    pub low: Option<Quantity>,
    /// High Range, if relevant
    /// 
    /// The value of the high bound of the reference range. The high bound of the
    /// reference range endpoint is inclusive of the value (e.g. reference range is
    /// \>=5 - \<=9). If the high bound is omitted, it is assumed to be meaningless
    /// (e.g. reference range is \>= 2.3).
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Conditions
    /// Used when: obs-3
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.high")]
    pub high: Option<Quantity>,
    /// Reference range qualifier
    /// 
    /// Codes to indicate the what part of the targeted reference population it
    /// applies to. For example, the normal or therapeutic range.
    /// 
    /// ## Requirements
    /// Need to be able to say what kind of reference range this is - normal,
    /// recommended, therapeutic, etc., - for proper interpretation.
    /// 
    /// ## Implementation Notes
    /// This SHOULD be populated if there is more than one range. If this element is
    /// not present then the normal range is assumed.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: preferred
    /// - **Description**: Code for the meaning of a reference range.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/referencerange-meaning
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.type")]
    #[fhir_serde(rename = "type")]
    pub r#type: Option<CodeableConcept>,
    /// Reference range population
    /// 
    /// Codes to indicate the target population this reference range applies to. For
    /// example, a reference range may be based on the normal population or a
    /// particular sex or race. Multiple `appliesTo` are interpreted as an "AND" of
    /// the target populations. For example, to represent a target population of
    /// African American females, both a code of female and a code for African
    /// American would be used.
    /// 
    /// ## Requirements
    /// Need to be able to identify the target population for proper interpretation.
    /// 
    /// ## Implementation Notes
    /// This SHOULD be populated if there is more than one range. If this element is
    /// not present then the normal population is assumed.
    /// 
    /// ## Cardinality: Optional, Multiple (0..*)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    /// 
    /// ## Binding
    /// - **Strength**: example
    /// - **Description**: Codes identifying the population the reference range applies to.
    /// - **ValueSet**: http://hl7.org/fhir/ValueSet/referencerange-appliesto
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.appliesTo")]
    #[fhir_serde(rename = "appliesTo")]
    pub applies_to: Option<Vec<CodeableConcept>>,
    /// Applicable age range, if relevant
    /// 
    /// The age at which this reference range is applicable. This is a neonatal age
    /// (e.g. number of weeks at term) if the meaning says so.
    /// 
    /// ## Requirements
    /// Some analytes vary greatly over age.
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.age")]
    pub age: Option<Range>,
    /// Text based reference range in an observation
    /// 
    /// Text based reference range in an observation which may be used when a
    /// quantitative range is not appropriate for an observation. An example would be
    /// a reference value of "Negative" or a list or table of "normals".
    /// 
    /// ## Cardinality: Optional (0..1)
    /// 
    /// ## Constraints
    /// - **ele-1**: All FHIR elements must have a @value or children (error)
    ///   Expression: `hasValue() or (children().count() > id.count())`
    #[fhir_invariant(key="ele-1", severity="error", human="All FHIR elements must have a @value or children", expr="hasValue() or (children().count() > id.count())", path="Observation.referenceRange.text")]
    pub text: Option<String>,
}

